{"ast":null,"code":"import _defineProperty from \"/Users/nicklascschmidt/Code/Nicky/threadauction/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/nicklascschmidt/Code/Nicky/threadauction/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/nicklascschmidt/Code/Nicky/threadauction/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/nicklascschmidt/Code/Nicky/threadauction/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/nicklascschmidt/Code/Nicky/threadauction/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/nicklascschmidt/Code/Nicky/threadauction/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/nicklascschmidt/Code/Nicky/threadauction/client/src/pages/signup/signup.js\";\nimport React from 'react';\nimport SignupForm from './SignupStyle';\nimport { validateInputs } from './userValidation';\nimport axios from 'axios';\nimport ErrorBox from '../../components/box/errorBox';\n\nvar Signup =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Signup, _React$Component);\n\n  function Signup(props) {\n    var _this;\n\n    _classCallCheck(this, Signup);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Signup).call(this, props));\n\n    _this.handleChange = function (event) {\n      var _event$target = event.target,\n          name = _event$target.name,\n          value = _event$target.value;\n\n      _this.setState(_defineProperty({}, name, value));\n    };\n\n    _this.handleSubmit = function (event) {\n      event.preventDefault();\n\n      _this.setState({\n        loading: true\n      }, function () {\n        return _this.saveInputs();\n      });\n    };\n\n    _this.saveInputs = function () {\n      var _this$state = _this.state,\n          firstName = _this$state.firstName,\n          lastName = _this$state.lastName,\n          username = _this$state.username,\n          password = _this$state.password,\n          email = _this$state.email,\n          address = _this$state.address,\n          city = _this$state.city,\n          stateUSA = _this$state.stateUSA,\n          zip = _this$state.zip;\n      var userData = {\n        firstName: firstName.toString(),\n        lastName: lastName.toString(),\n        username: username.toString(),\n        password: password.toString(),\n        email: email.toString(),\n        address: address.toString(),\n        city: city.toString(),\n        stateUSA: stateUSA.toString(),\n        zip: zip.toString()\n      };\n\n      var errorObject = _this.validateUserInputs(userData); // if validateUserInputs returns an error, then show to the user. Else, send data to DB.\n\n\n      if (errorObject.isError) {\n        _this.setState({\n          errorArray: errorObject.errorArray,\n          isError: true,\n          loading: false\n        });\n      } else {\n        _this.sendUserDataToDb(userData);\n      }\n    };\n\n    _this.validateUserInputs = function (data) {\n      var errorObject = validateInputs(data);\n      return errorObject;\n    };\n\n    _this.sendUserDataToDb = function (data) {\n      // TODO: UPDATED!\n      axios.post('/api/users/signup', data).then(function (resp) {\n        if (resp.status === 200) {\n          _this.setState({\n            submitted: true,\n            loading: false,\n            errorArray: [],\n            isError: false\n          });\n        }\n      }).catch(function (err) {\n        _this.setState({\n          errorArray: ['There was a problem saving your account']\n        });\n      });\n    };\n\n    _this.componentDidUpdate = function () {\n      // bring user to login page on page submit\n      if (_this.state.submitted) {\n        window.location = '/login';\n      }\n    };\n\n    _this.displayErrors = function () {\n      return _this.state.errorArray.map(function (errorMsg, n) {\n        return React.createElement(\"p\", {\n          key: n,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101\n          },\n          __self: this\n        }, errorMsg);\n      });\n    };\n\n    _this.state = {\n      firstName: '',\n      lastName: '',\n      username: '',\n      password: '',\n      email: '',\n      address: '',\n      city: '',\n      stateUSA: '',\n      zip: '',\n      submitted: false,\n      loading: false,\n      errorArray: [],\n      isError: null\n    };\n    return _this;\n  }\n\n  _createClass(Signup, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(SignupForm, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        className: \"fillOut\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, \"Please fill out the information below.\"), this.state.isError && React.createElement(ErrorBox, {\n        className: \"error-box\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, this.displayErrors()), React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"userInfo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"userInfoHead\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, \"User Info\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        placeholder: \"First name\",\n        name: \"firstName\",\n        value: this.state.firstName,\n        onChange: function onChange(event) {\n          return _this2.handleChange(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        placeholder: \"Last name\",\n        name: \"lastName\",\n        value: this.state.lastName,\n        onChange: function onChange(event) {\n          return _this2.handleChange(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        placeholder: \"Username\",\n        name: \"username\",\n        value: this.state.username,\n        onChange: function onChange(event) {\n          return _this2.handleChange(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"password\",\n        placeholder: \"Password\",\n        name: \"password\",\n        value: this.state.password,\n        onChange: function onChange(event) {\n          return _this2.handleChange(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        placeholder: \"Email\",\n        name: \"email\",\n        value: this.state.email,\n        onChange: function onChange(event) {\n          return _this2.handleChange(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"shippingInfo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"shippingInfoHead\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, \"Shipping Info\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        placeholder: \"Address\",\n        name: \"address\",\n        value: this.state.address,\n        onChange: function onChange(event) {\n          return _this2.handleChange(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        placeholder: \"City\",\n        name: \"city\",\n        value: this.state.city,\n        onChange: function onChange(event) {\n          return _this2.handleChange(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        placeholder: \"State\",\n        name: \"stateUSA\",\n        value: this.state.stateUSA,\n        onChange: function onChange(event) {\n          return _this2.handleChange(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        placeholder: \"Zip\",\n        name: \"zip\",\n        value: this.state.zip,\n        onChange: function onChange(event) {\n          return _this2.handleChange(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }))), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"buttonDiv\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, this.state.loading ? 'Loading...' : React.createElement(\"button\", {\n        className: \"submitBtn\",\n        onClick: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, \"submit\"))));\n    }\n  }]);\n\n  return Signup;\n}(React.Component);\n\nexport default Signup;","map":{"version":3,"sources":["/Users/nicklascschmidt/Code/Nicky/threadauction/client/src/pages/signup/signup.js"],"names":["React","SignupForm","validateInputs","axios","ErrorBox","Signup","props","handleChange","event","target","name","value","setState","handleSubmit","preventDefault","loading","saveInputs","state","firstName","lastName","username","password","email","address","city","stateUSA","zip","userData","toString","errorObject","validateUserInputs","isError","errorArray","sendUserDataToDb","data","post","then","resp","status","submitted","catch","err","componentDidUpdate","window","location","displayErrors","map","errorMsg","n","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport SignupForm from './SignupStyle';\nimport { validateInputs } from './userValidation';\nimport axios from 'axios';\nimport ErrorBox from '../../components/box/errorBox';\n\n\nclass Signup extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      firstName: '',\n      lastName: '',\n      username: '',\n      password: '',\n      email: '',\n      address: '',\n      city: '',\n      stateUSA: '',\n      zip: '',\n      submitted: false,\n      loading: false,\n      errorArray: [],\n      isError: null\n    }\n  }\n\n  handleChange = (event) => {\n    const { name, value } = event.target;\n    this.setState({\n      [name]: value\n    });\n  }\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n    this.setState({ loading: true }, () => this.saveInputs());\n  }\n\n  saveInputs = () => {\n    const { firstName, lastName, username, password, email, address, city, stateUSA, zip } = this.state;\n    const userData = {\n      firstName: firstName.toString(),\n      lastName: lastName.toString(),\n      username: username.toString(),\n      password: password.toString(),\n      email: email.toString(),\n      address: address.toString(),\n      city: city.toString(),\n      stateUSA: stateUSA.toString(),\n      zip: zip.toString()\n    }\n\n    const errorObject = this.validateUserInputs(userData);\n\n    // if validateUserInputs returns an error, then show to the user. Else, send data to DB.\n    if (errorObject.isError) {\n      this.setState({\n        errorArray: errorObject.errorArray,\n        isError: true,\n        loading: false\n      });\n    } else {\n      this.sendUserDataToDb(userData);\n    }\n  }\n\n  validateUserInputs = (data) => {\n    let errorObject = validateInputs(data);\n    return errorObject;\n  }\n\n  sendUserDataToDb = (data) => {\n    // TODO: UPDATED!\n    axios.post('/api/users/signup', data)\n      .then(resp => {\n        if (resp.status === 200) {\n          this.setState({\n            submitted: true,\n            loading: false,\n            errorArray: [],\n            isError: false\n          });\n        }\n      })\n      .catch(err => {\n        this.setState({ errorArray: ['There was a problem saving your account'] });\n      });\n  }\n\n  componentDidUpdate = () => {\n    // bring user to login page on page submit\n    if (this.state.submitted) {\n      window.location = '/login';\n    }\n  }\n\n  displayErrors = () => {\n    return this.state.errorArray.map((errorMsg, n) => {\n      return <p key={n}>{errorMsg}</p>\n    })\n  }\n\n  render() {\n    return (\n      <SignupForm>\n        <h3 className=\"fillOut\">Please fill out the information below.</h3>\n        {this.state.isError && <ErrorBox className='error-box'>{this.displayErrors()}</ErrorBox>}\n\n        <form>\n          <div className=\"userInfo\">\n            <p className=\"userInfoHead\">User Info</p>\n            <div>\n              <input\n                type=\"text\"\n                placeholder=\"First name\"\n                name=\"firstName\"\n                value={this.state.firstName}\n                onChange={event => this.handleChange(event)}\n              />\n            </div>\n            <div>\n              <input\n                type=\"text\"\n                placeholder=\"Last name\"\n                name=\"lastName\"\n                value={this.state.lastName}\n                onChange={event => this.handleChange(event)}\n              />\n            </div>\n            <div>\n              <input\n                type=\"text\"\n                placeholder=\"Username\"\n                name=\"username\"\n                value={this.state.username}\n                onChange={event => this.handleChange(event)}\n              />\n            </div>\n            <div>\n              <input\n                type=\"password\"\n                placeholder=\"Password\"\n                name=\"password\"\n                value={this.state.password}\n                onChange={event => this.handleChange(event)}\n              />\n            </div>\n            <div>\n              <input\n                type=\"text\"\n                placeholder=\"Email\"\n                name=\"email\"\n                value={this.state.email}\n                onChange={event => this.handleChange(event)}\n              />\n            </div>\n          </div>\n          <div className='shippingInfo'>\n            <p className=\"shippingInfoHead\">Shipping Info</p>\n            <div>\n              <input\n                type=\"text\"\n                placeholder=\"Address\"\n                name=\"address\"\n                value={this.state.address}\n                onChange={event => this.handleChange(event)}\n              />\n            </div>\n            <div>\n              <input\n                type=\"text\"\n                placeholder=\"City\"\n                name=\"city\"\n                value={this.state.city}\n                onChange={event => this.handleChange(event)}\n              />\n            </div>\n            <div>\n              <input\n                type=\"text\"\n                placeholder=\"State\"\n                name=\"stateUSA\"\n                value={this.state.stateUSA}\n                onChange={event => this.handleChange(event)}\n              />\n            </div>\n            <div>\n              <input\n                type=\"text\"\n                placeholder=\"Zip\"\n                name=\"zip\"\n                value={this.state.zip}\n                onChange={event => this.handleChange(event)}\n              />\n            </div>\n          </div>\n          <br></br>\n          <div className='buttonDiv'>\n            {this.state.loading ? 'Loading...' : <button className='submitBtn' onClick={this.handleSubmit}>submit</button>}\n          </div>\n        </form>\n      </SignupForm>\n    )\n  }\n}\n\nexport default Signup;"]},"metadata":{},"sourceType":"module"}