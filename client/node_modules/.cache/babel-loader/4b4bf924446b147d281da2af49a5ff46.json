{"ast":null,"code":"import _defineProperty from \"/Users/nicklascschmidt/Code/Nicky/threadauction/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/nicklascschmidt/Code/Nicky/threadauction/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/nicklascschmidt/Code/Nicky/threadauction/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/nicklascschmidt/Code/Nicky/threadauction/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/nicklascschmidt/Code/Nicky/threadauction/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/nicklascschmidt/Code/Nicky/threadauction/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/nicklascschmidt/Code/Nicky/threadauction/client/src/pages/createAuction/createAuction.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport { validateUserInputs } from './userValidation';\nimport { connect } from 'react-redux';\nimport CategoryForm from \"../../components/form/CategoryForm\";\nimport AuctionStyle from \"./CreateAuctionStyle\";\nimport ErrorBox from '../../components/box/errorBox';\n\nvar CreateAuction =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(CreateAuction, _React$Component);\n\n  function CreateAuction(props) {\n    var _this;\n\n    _classCallCheck(this, CreateAuction);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CreateAuction).call(this, props));\n\n    _this.componentDidMount = function () {\n      _this.setState({\n        title: '',\n        description: '',\n        imgLink: '',\n        gender: '',\n        category: '',\n        startingPrice: 10,\n        minBidIncrement: 5,\n        submitted: false,\n        loading: false,\n        errorArray: [],\n        isError: null\n      });\n    };\n\n    _this.handleInputChange = function (event) {\n      var _event$target = event.target,\n          name = _event$target.name,\n          value = _event$target.value;\n\n      _this.setState(_defineProperty({}, name, value));\n    };\n\n    _this.handleRadioButtonChange = function (event) {\n      _this.setState({\n        gender: event.target.value\n      }, function () {\n        console.log(_this.state);\n      });\n    };\n\n    _this.handleCategoryChange = function (event) {\n      _this.setState({\n        category: event.value\n      }, function () {\n        console.log(_this.state);\n      });\n    };\n\n    _this.handleSliderChange = function (event) {\n      var _event$target2 = event.target,\n          id = _event$target2.id,\n          value = _event$target2.value;\n\n      _this.setState(_defineProperty({}, id, value));\n    };\n\n    _this.handleSubmit = function (event) {\n      event.preventDefault();\n\n      _this.setState({\n        loading: true\n      }, function () {\n        return _this.saveInputs();\n      });\n    };\n\n    _this.saveInputs = function () {\n      // console.log('~~~~~~~~~~', this.state);\n      var _this$state = _this.state,\n          title = _this$state.title,\n          description = _this$state.description,\n          imgLink = _this$state.imgLink,\n          gender = _this$state.gender,\n          category = _this$state.category,\n          startingPrice = _this$state.startingPrice,\n          minBidIncrement = _this$state.minBidIncrement;\n      var itemData = {\n        userId: _this.props.userId,\n        title: title.toString(),\n        description: description.toString(),\n        imgLink: imgLink.toString(),\n        gender: gender.toString(),\n        category: category.toString(),\n        startingPrice: startingPrice,\n        minBidIncrement: minBidIncrement // console.log('saveInputs itemData',itemData);\n\n      };\n      var errorObject = validateUserInputs(itemData); // console.log('validateUserInputs returned errorObject',errorObject);\n\n      _this.setState({\n        errorArray: errorObject.errorArray,\n        isError: errorObject.isError\n      }, function () {\n        console.log(_this.state);\n      }); // if validateUserInputs returns an error, then show to the user. Else, run sendUserDataToDb.\n\n\n      if (errorObject.isError) {\n        console.log('WOAH we got an error. Do not send data to db');\n\n        _this.setState({\n          loading: false\n        });\n      } else {\n        console.log('send that s h i t to the DB!');\n\n        _this.sendUserDataToDb(itemData);\n      }\n    };\n\n    _this.sendUserDataToDb = function (data) {\n      console.log('sending user data to db....');\n      axios.post('/api/auction/create', data).then(function (resp) {\n        console.log(resp.data);\n\n        if (resp.status === 200) {\n          console.log('success');\n\n          _this.setState({\n            submitted: true,\n            loading: false,\n            errorArray: [],\n            isError: false\n          });\n        } else {\n          console.log('front end /api/auction/create error');\n        }\n      }).catch(function (err) {\n        console.log(err);\n\n        _this.setState({\n          errorArray: ['There was a problem saving your auction.']\n        });\n      });\n    };\n\n    _this.componentDidUpdate = function () {\n      if (_this.state.submitted) {\n        // window.location = '/login';\n        console.log('~~~~~~SUBMITTED~~~~~~');\n\n        _this.setState({\n          title: '',\n          description: '',\n          imgLink: '',\n          gender: '',\n          category: '',\n          startingPrice: 10,\n          minBidIncrement: 5,\n          submitted: false\n        }, function () {\n          _this.handleCategoryChange({\n            value: _this.state.category\n          });\n        });\n      }\n    };\n\n    _this.displayErrors = function () {\n      return _this.state.errorArray.map(function (errorMsg, n) {\n        return React.createElement(\"p\", {\n          key: n,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 167\n          },\n          __self: this\n        }, errorMsg);\n      });\n    };\n\n    _this.state = {\n      title: '',\n      description: '',\n      imgLink: '',\n      gender: '',\n      category: '',\n      startingPrice: '',\n      minBidIncrement: '',\n      submitted: false,\n      loading: false,\n      errorArray: [],\n      isError: null\n    };\n    return _this;\n  }\n\n  _createClass(CreateAuction, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(AuctionStyle, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, this.state.isError ? React.createElement(ErrorBox, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, this.displayErrors()) : '', React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"theForm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, \"Item Info\")), React.createElement(\"div\", {\n        className: \"title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }, \"Title: \"), React.createElement(\"input\", {\n        type: \"text\",\n        name: \"title\",\n        value: this.state.title,\n        onChange: function onChange(event) {\n          return _this2.handleInputChange(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"description\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, \"Description: \"), React.createElement(\"textarea\", {\n        name: \"description\",\n        value: this.state.description,\n        onChange: function onChange(event) {\n          return _this2.handleInputChange(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"ImageLink\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, \"Image Link: \"), React.createElement(\"input\", {\n        type: \"text\",\n        name: \"imgLink\",\n        value: this.state.imgLink,\n        onChange: function onChange(event) {\n          return _this2.handleInputChange(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"genderList\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }, \"Gender: \"), React.createElement(\"ul\", {\n        className: \"selectGender d-flex justify-content-around\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"male\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"radio\",\n        id: \"male\",\n        name: \"gender\",\n        value: \"M\",\n        checked: this.state.gender === 'M',\n        onChange: function onChange(event) {\n          return _this2.handleRadioButtonChange(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }), \"Male\")), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"female\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"radio\",\n        id: \"female\",\n        name: \"gender\",\n        value: \"F\",\n        checked: this.state.gender === 'F',\n        onChange: function onChange(event) {\n          return _this2.handleRadioButtonChange(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }), \"Female\")), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"unisex\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"radio\",\n        id: \"unisex\",\n        name: \"gender\",\n        value: \"U\",\n        checked: this.state.gender === 'U',\n        onChange: function onChange(event) {\n          return _this2.handleRadioButtonChange(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }), \"Unisex\")))), React.createElement(\"div\", {\n        className: \"extra-padding\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232\n        },\n        __self: this\n      }, \"Category: \"), React.createElement(CategoryForm, {\n        category: this.state.category,\n        handleCategoryChange: this.handleCategoryChange.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236\n        },\n        __self: this\n      }, \"Starting Price: $\", this.state.startingPrice), React.createElement(\"input\", {\n        type: \"range\",\n        min: \"1\",\n        max: \"300\",\n        value: this.state.startingPrice,\n        className: \"slider slider-width\",\n        id: \"startingPrice\",\n        onChange: function onChange(event) {\n          return _this2.handleSliderChange(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240\n        },\n        __self: this\n      }, \"Minimum Bid Increment: $\", this.state.minBidIncrement), React.createElement(\"input\", {\n        type: \"range\",\n        min: \"1\",\n        max: \"20\",\n        value: this.state.minBidIncrement,\n        className: \"slider\",\n        id: \"minBidIncrement\",\n        onChange: function onChange(event) {\n          return _this2.handleSliderChange(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"AuctionSubmit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244\n        },\n        __self: this\n      }, this.state.loading ? 'Loading...' : React.createElement(\"button\", {\n        className: \"btn btn-info submit-button\",\n        onClick: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245\n        },\n        __self: this\n      }, \"submit\"))));\n    }\n  }]);\n\n  return CreateAuction;\n}(React.Component);\n\nfunction mapStateToProps(state) {\n  console.log('Product: mapStateToProps state', state);\n  return {\n    username: state.username,\n    userId: state.userId,\n    isLoggedIn: true\n  };\n}\n\nexport default connect(mapStateToProps)(CreateAuction);","map":{"version":3,"sources":["/Users/nicklascschmidt/Code/Nicky/threadauction/client/src/pages/createAuction/createAuction.js"],"names":["React","axios","validateUserInputs","connect","CategoryForm","AuctionStyle","ErrorBox","CreateAuction","props","componentDidMount","setState","title","description","imgLink","gender","category","startingPrice","minBidIncrement","submitted","loading","errorArray","isError","handleInputChange","event","target","name","value","handleRadioButtonChange","console","log","state","handleCategoryChange","handleSliderChange","id","handleSubmit","preventDefault","saveInputs","itemData","userId","toString","errorObject","sendUserDataToDb","data","post","then","resp","status","catch","err","componentDidUpdate","displayErrors","map","errorMsg","n","bind","Component","mapStateToProps","username","isLoggedIn"],"mappings":"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","sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport { validateUserInputs } from './userValidation';\nimport { connect } from 'react-redux';\nimport CategoryForm from \"../../components/form/CategoryForm\";\nimport AuctionStyle from \"./CreateAuctionStyle\";\nimport ErrorBox from '../../components/box/errorBox';\n\n\nclass CreateAuction extends React.Component {\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            title: '',\n            description: '',\n            imgLink: '',\n            gender: '',\n            category: '',\n            startingPrice: '',\n            minBidIncrement: '',\n\n            submitted: false,\n            loading: false,\n            errorArray: [],\n            isError: null\n        }\n        \n    }\n\n    componentDidMount = () => {\n        this.setState({\n            title: '',\n            description: '',\n            imgLink: '',\n            gender: '',\n            category: '',\n            startingPrice: 10,\n            minBidIncrement: 5,\n            \n            submitted: false,\n            loading: false,\n            errorArray: [],\n            isError: null\n        });\n    }\n\n    handleInputChange = (event) => {\n        const { name, value } = event.target;\n        this.setState({\n            [name]: value\n        });\n    }\n\n    handleRadioButtonChange = (event) => {\n        this.setState({\n            gender: event.target.value\n        }, () => {console.log(this.state)})\n    }\n\n    handleCategoryChange = (event) => {\n        this.setState({\n            category: event.value\n        }, () => {console.log(this.state)})\n    }\n\n    handleSliderChange = (event) => {\n        const { id, value } = event.target;\n        this.setState({\n            [id]: value\n        });\n    }\n\n    handleSubmit = (event) => {\n        event.preventDefault();\n\n        this.setState({loading: true}, () => this.saveInputs());\n    }\n\n    saveInputs = () => {\n        // console.log('~~~~~~~~~~', this.state);\n        const { title, description, imgLink, gender, category, startingPrice, minBidIncrement } = this.state;\n        const itemData = {\n            userId: this.props.userId,\n            title: title.toString(),\n            description: description.toString(),\n            imgLink: imgLink.toString(),\n            gender: gender.toString(),\n            category: category.toString(),\n            startingPrice: startingPrice,\n            minBidIncrement: minBidIncrement\n        }\n        // console.log('saveInputs itemData',itemData);\n\n        const errorObject = validateUserInputs(itemData);\n        // console.log('validateUserInputs returned errorObject',errorObject);\n\n        this.setState({\n            errorArray: errorObject.errorArray,\n            isError: errorObject.isError\n        }, () => {\n            console.log(this.state);\n        });\n\n        // if validateUserInputs returns an error, then show to the user. Else, run sendUserDataToDb.\n        if (errorObject.isError) {\n            console.log('WOAH we got an error. Do not send data to db');\n            this.setState({\n                loading: false\n            });\n        } else {\n            console.log('send that s h i t to the DB!');\n            this.sendUserDataToDb(itemData);\n        }\n    }\n\n\n    sendUserDataToDb = (data) => {\n        console.log('sending user data to db....');\n\n        axios.post('/api/auction/create', data)\n            .then(resp => {\n                console.log(resp.data);\n                if (resp.status === 200) {\n                    console.log('success');\n                    this.setState({\n                        submitted: true,\n                        loading: false,\n                        errorArray: [],\n                        isError: false\n                    });\n                } else {\n                    console.log('front end /api/auction/create error');\n                }\n            }).catch(err => {\n                console.log(err);\n                this.setState({\n                    errorArray: ['There was a problem saving your auction.']\n                });\n            });\n        \n    }\n\n    componentDidUpdate = () => {\n        if (this.state.submitted) {\n            // window.location = '/login';\n            console.log('~~~~~~SUBMITTED~~~~~~');\n            this.setState({\n                title: '',\n                description: '',\n                imgLink: '',\n                gender: '',\n                category: '',\n\n                startingPrice: 10,\n                minBidIncrement: 5,\n                submitted: false\n            }, () => {\n                this.handleCategoryChange({ value: this.state.category});\n            })\n        }\n    }\n\n\n    displayErrors = () => {\n        return this.state.errorArray.map((errorMsg , n) => {\n            return <p key={n}>{errorMsg}</p>\n        })\n    }\n\n    \n    render() {\n       \n        return (\n            <AuctionStyle>\n                {this.state.isError ? <ErrorBox >{this.displayErrors()}</ErrorBox> : ''}\n                <form>\n                    <div className='theForm'>\n                        <div className='text-center'>\n                            <h4>Item Info</h4>\n                        </div>\n                        <div className=\"title\">\n                            <span>Title: </span>\n                            <input\n                                type=\"text\"\n                                name=\"title\"\n                                value={this.state.title}\n                                onChange={event => this.handleInputChange(event)}\n                            />\n                        </div>\n                        <div className=\"description\">\n                            <span>Description: </span>\n                            <textarea\n                                name=\"description\"\n                                value={this.state.description}\n                                onChange={event => this.handleInputChange(event)}\n                            />\n                        </div>\n                        <div className=\"ImageLink\">\n                            <span>Image Link: </span>\n                            <input\n                                type=\"text\"\n                                name=\"imgLink\"\n                                value={this.state.imgLink}\n                                onChange={event => this.handleInputChange(event)}\n                            />\n                        </div>\n                        <div className=\"genderList\">\n                            <span>Gender: </span>\n                            <ul className=\"selectGender d-flex justify-content-around\">\n                                <li>\n                                    <label htmlFor=\"male\">\n                                        <input type=\"radio\" id=\"male\" name=\"gender\" value=\"M\" checked={this.state.gender === 'M'} onChange={event => this.handleRadioButtonChange(event)}/>\n                                        Male\n                                    </label>\n                                </li>\n                                <li>\n                                    <label htmlFor=\"female\">\n                                        <input type=\"radio\" id=\"female\" name=\"gender\" value=\"F\" checked={this.state.gender === 'F'} onChange={event => this.handleRadioButtonChange(event)}/>\n                                        Female\n                                    </label>\n                                </li>\n                                <li>\n                                    <label htmlFor=\"unisex\">\n                                        <input type=\"radio\" id=\"unisex\" name=\"gender\" value=\"U\" checked={this.state.gender === 'U'} onChange={event => this.handleRadioButtonChange(event)}/>\n                                        Unisex\n                                    </label>\n                                </li>\n                            </ul>\n                        </div>\n                        <div className='extra-padding'>\n                            <span>Category: </span>\n                            <CategoryForm category={this.state.category} handleCategoryChange={this.handleCategoryChange.bind(this)}/>\n                        </div>\n                        <div>\n                            <div>Starting Price: ${this.state.startingPrice}</div>\n                            <input type=\"range\" min=\"1\" max=\"300\" value={this.state.startingPrice} className=\"slider slider-width\" id=\"startingPrice\" onChange={event => this.handleSliderChange(event)} />\n                        </div>\n                        <div>\n                            <div>Minimum Bid Increment: ${this.state.minBidIncrement}</div>\n                            <input type=\"range\" min=\"1\" max=\"20\" value={this.state.minBidIncrement} className=\"slider\" id=\"minBidIncrement\" onChange={event => this.handleSliderChange(event)} />\n                        </div>\n                    </div>\n                    <div className='AuctionSubmit'>\n                        {this.state.loading ? 'Loading...' : <button className='btn btn-info submit-button' onClick={this.handleSubmit}>submit</button>}\n                    </div>\n                    \n                </form>\n            </AuctionStyle>\n        )\n    }\n}\n\n\nfunction mapStateToProps(state) {\n    console.log('Product: mapStateToProps state',state);\n    return {\n      username: state.username,\n      userId: state.userId,\n      isLoggedIn: true\n    };\n}\n\nexport default connect(mapStateToProps)(CreateAuction);\n"]},"metadata":{},"sourceType":"module"}