{"ast":null,"code":"import _defineProperty from \"/Users/nicklascschmidt/Code/Nicky/threadauction/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/nicklascschmidt/Code/Nicky/threadauction/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/nicklascschmidt/Code/Nicky/threadauction/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/nicklascschmidt/Code/Nicky/threadauction/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/nicklascschmidt/Code/Nicky/threadauction/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/nicklascschmidt/Code/Nicky/threadauction/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/nicklascschmidt/Code/Nicky/threadauction/client/src/pages/createAuction/createAuction.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport { validateUserInputs } from './userValidation';\nimport { connect } from 'react-redux';\nimport CategoryForm from \"../../components/form/CategoryForm\";\nimport AuctionStyle from \"./CreateAuctionStyle\";\nimport ErrorBox from '../../components/box/errorBox';\n\nvar CreateAuction =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(CreateAuction, _React$Component);\n\n  function CreateAuction(props) {\n    var _this;\n\n    _classCallCheck(this, CreateAuction);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CreateAuction).call(this, props));\n\n    _this.handleInputChange = function (event) {\n      var _event$target = event.target,\n          name = _event$target.name,\n          value = _event$target.value;\n\n      _this.setState(_defineProperty({}, name, value));\n    };\n\n    _this.handleRadioButtonChange = function (event) {\n      _this.setState({\n        gender: event.target.value\n      }, function () {\n        console.log(_this.state);\n      });\n    };\n\n    _this.handleCategoryChange = function (event) {\n      _this.setState({\n        category: event.value\n      }, function () {\n        console.log(_this.state);\n      });\n    };\n\n    _this.handleSliderChange = function (event) {\n      var _event$target2 = event.target,\n          id = _event$target2.id,\n          value = _event$target2.value;\n\n      _this.setState(_defineProperty({}, id, value));\n    };\n\n    _this.handleSubmit = function (event) {\n      event.preventDefault();\n\n      _this.setState({\n        loading: true\n      }, function () {\n        return _this.saveInputs();\n      });\n    };\n\n    _this.saveInputs = function () {\n      var _this$state = _this.state,\n          title = _this$state.title,\n          description = _this$state.description,\n          imgLink = _this$state.imgLink,\n          gender = _this$state.gender,\n          category = _this$state.category,\n          startingPrice = _this$state.startingPrice,\n          minBidIncrement = _this$state.minBidIncrement;\n      var itemData = {\n        userId: _this.props.userId,\n        title: title.toString(),\n        description: description.toString(),\n        imgLink: imgLink.toString(),\n        gender: gender.toString(),\n        category: category.toString(),\n        startingPrice: startingPrice,\n        minBidIncrement: minBidIncrement\n      };\n      var errorObject = validateUserInputs(itemData);\n\n      _this.setState({\n        errorArray: errorObject.errorArray,\n        isError: errorObject.isError\n      }); // if validateUserInputs returns an error, then show to the user. Else, run sendUserDataToDb.\n\n\n      if (errorObject.isError) {\n        _this.setState({\n          loading: false\n        });\n      } else {\n        _this.sendUserDataToDb(itemData);\n      }\n    };\n\n    _this.sendUserDataToDb = function (data) {\n      axios.post('/api/auctions/create', data).then(function (resp) {\n        console.log(resp.data);\n\n        if (resp.status === 200) {\n          console.log('success');\n\n          _this.setState({\n            submitted: true,\n            loading: false,\n            errorArray: [],\n            isError: false\n          });\n        } else {\n          console.log('front end /api/auction/create error');\n        }\n      }).catch(function (err) {\n        console.log(err);\n\n        _this.setState({\n          errorArray: ['There was a problem saving your auction.']\n        });\n      });\n    };\n\n    _this.componentDidUpdate = function () {\n      if (_this.state.submitted) {\n        _this.setState({\n          title: '',\n          description: '',\n          imgLink: '',\n          gender: '',\n          category: '',\n          startingPrice: 10,\n          minBidIncrement: 5,\n          submitted: false\n        }, function () {\n          _this.handleCategoryChange({\n            value: _this.state.category\n          });\n        });\n      }\n    };\n\n    _this.displayErrors = function () {\n      return _this.state.errorArray.map(function (errorMsg, n) {\n        return React.createElement(\"p\", {\n          key: n,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134\n          },\n          __self: this\n        }, errorMsg);\n      });\n    };\n\n    _this.state = {\n      title: '',\n      description: '',\n      imgLink: '',\n      gender: '',\n      category: '',\n      startingPrice: 10,\n      minBidIncrement: 5,\n      submitted: false,\n      loading: false,\n      errorArray: [],\n      isError: null\n    };\n    return _this;\n  }\n\n  _createClass(CreateAuction, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(AuctionStyle, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, this.state.isError ? React.createElement(ErrorBox, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, this.displayErrors()) : '', React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"theForm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, \"Item Info\")), React.createElement(\"div\", {\n        className: \"title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, \"Title: \"), React.createElement(\"input\", {\n        type: \"text\",\n        name: \"title\",\n        value: this.state.title,\n        onChange: function onChange(event) {\n          return _this2.handleInputChange(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"description\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, \"Description: \"), React.createElement(\"textarea\", {\n        name: \"description\",\n        value: this.state.description,\n        onChange: function onChange(event) {\n          return _this2.handleInputChange(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"ImageLink\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, \"Image Link: \"), React.createElement(\"input\", {\n        type: \"text\",\n        name: \"imgLink\",\n        value: this.state.imgLink,\n        onChange: function onChange(event) {\n          return _this2.handleInputChange(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"genderList\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, \"Gender: \"), React.createElement(\"ul\", {\n        className: \"selectGender d-flex justify-content-around\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"radio\",\n        id: \"male\",\n        name: \"gender\",\n        value: \"M\",\n        checked: this.state.gender === 'M',\n        onChange: function onChange(event) {\n          return _this2.handleRadioButtonChange(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        htmlFor: \"male\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, \"Male\")), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"radio\",\n        id: \"female\",\n        name: \"gender\",\n        value: \"F\",\n        checked: this.state.gender === 'F',\n        onChange: function onChange(event) {\n          return _this2.handleRadioButtonChange(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        htmlFor: \"female\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, \"Female\")), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"radio\",\n        id: \"unisex\",\n        name: \"gender\",\n        value: \"U\",\n        checked: this.state.gender === 'U',\n        onChange: function onChange(event) {\n          return _this2.handleRadioButtonChange(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        htmlFor: \"unisex\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }, \"Unisex\")))), React.createElement(\"div\", {\n        className: \"extra-padding\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, \"Category: \"), React.createElement(CategoryForm, {\n        category: this.state.category,\n        handleCategoryChange: this.handleCategoryChange.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }, \"Starting Price: $\", this.state.startingPrice), React.createElement(\"input\", {\n        type: \"range\",\n        min: \"1\",\n        max: \"300\",\n        value: this.state.startingPrice,\n        className: \"slider slider-width\",\n        id: \"startingPrice\",\n        onChange: function onChange(event) {\n          return _this2.handleSliderChange(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }, \"Minimum Bid Increment: $\", this.state.minBidIncrement), React.createElement(\"input\", {\n        type: \"range\",\n        min: \"1\",\n        max: \"20\",\n        value: this.state.minBidIncrement,\n        className: \"slider\",\n        id: \"minBidIncrement\",\n        onChange: function onChange(event) {\n          return _this2.handleSliderChange(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"AuctionSubmit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }, this.state.loading ? 'Loading...' : React.createElement(\"button\", {\n        className: \"btn btn-info submit-button\",\n        onClick: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }, \"submit\"))));\n    }\n  }]);\n\n  return CreateAuction;\n}(React.Component);\n\nfunction mapStateToProps(state) {\n  console.log('Product: mapStateToProps state', state);\n  return {\n    username: state.username,\n    userId: state.userId,\n    isLoggedIn: true\n  };\n}\n\nexport default connect(mapStateToProps)(CreateAuction);","map":{"version":3,"sources":["/Users/nicklascschmidt/Code/Nicky/threadauction/client/src/pages/createAuction/createAuction.js"],"names":["React","axios","validateUserInputs","connect","CategoryForm","AuctionStyle","ErrorBox","CreateAuction","props","handleInputChange","event","target","name","value","setState","handleRadioButtonChange","gender","console","log","state","handleCategoryChange","category","handleSliderChange","id","handleSubmit","preventDefault","loading","saveInputs","title","description","imgLink","startingPrice","minBidIncrement","itemData","userId","toString","errorObject","errorArray","isError","sendUserDataToDb","data","post","then","resp","status","submitted","catch","err","componentDidUpdate","displayErrors","map","errorMsg","n","bind","Component","mapStateToProps","username","isLoggedIn"],"mappings":"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","sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport { validateUserInputs } from './userValidation';\nimport { connect } from 'react-redux';\nimport CategoryForm from \"../../components/form/CategoryForm\";\nimport AuctionStyle from \"./CreateAuctionStyle\";\nimport ErrorBox from '../../components/box/errorBox';\n\n\nclass CreateAuction extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      title: '',\n      description: '',\n      imgLink: '',\n      gender: '',\n      category: '',\n      startingPrice: 10,\n      minBidIncrement: 5,\n\n      submitted: false,\n      loading: false,\n      errorArray: [],\n      isError: null\n    }\n  }\n\n  handleInputChange = (event) => {\n    const { name, value } = event.target;\n    this.setState({\n      [name]: value\n    });\n  }\n\n  handleRadioButtonChange = (event) => {\n    this.setState({\n      gender: event.target.value\n    }, () => { console.log(this.state) })\n  }\n\n  handleCategoryChange = (event) => {\n    this.setState({\n      category: event.value\n    }, () => { console.log(this.state) })\n  }\n\n  handleSliderChange = (event) => {\n    const { id, value } = event.target;\n    this.setState({\n      [id]: value\n    });\n  }\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n\n    this.setState({ loading: true }, () => this.saveInputs());\n  }\n\n  saveInputs = () => {\n    let { title, description, imgLink, gender, category, startingPrice, minBidIncrement } = this.state;\n    let itemData = {\n      userId: this.props.userId,\n      title: title.toString(),\n      description: description.toString(),\n      imgLink: imgLink.toString(),\n      gender: gender.toString(),\n      category: category.toString(),\n      startingPrice: startingPrice,\n      minBidIncrement: minBidIncrement\n    }\n\n    let errorObject = validateUserInputs(itemData);\n\n    this.setState({\n      errorArray: errorObject.errorArray,\n      isError: errorObject.isError\n    });\n\n    // if validateUserInputs returns an error, then show to the user. Else, run sendUserDataToDb.\n    if (errorObject.isError) {\n      this.setState({ loading: false });\n    } else {\n      this.sendUserDataToDb(itemData);\n    }\n  }\n\n  sendUserDataToDb = (data) => {\n    axios.post('/api/auctions/create', data)\n      .then(resp => {\n        console.log(resp.data);\n        if (resp.status === 200) {\n          console.log('success');\n          this.setState({\n            submitted: true,\n            loading: false,\n            errorArray: [],\n            isError: false\n          });\n        } else {\n          console.log('front end /api/auction/create error');\n        }\n      }).catch(err => {\n        console.log(err);\n        this.setState({\n          errorArray: ['There was a problem saving your auction.']\n        });\n      });\n\n  }\n\n  componentDidUpdate = () => {\n    if (this.state.submitted) {\n      this.setState({\n        title: '',\n        description: '',\n        imgLink: '',\n        gender: '',\n        category: '',\n\n        startingPrice: 10,\n        minBidIncrement: 5,\n        submitted: false\n      }, () => {\n        this.handleCategoryChange({ value: this.state.category });\n      })\n    }\n  }\n\n  displayErrors = () => {\n    return this.state.errorArray.map((errorMsg, n) => {\n      return <p key={n}>{errorMsg}</p>\n    })\n  }\n\n  render() {\n    return (\n      <AuctionStyle>\n        {this.state.isError ? <ErrorBox >{this.displayErrors()}</ErrorBox> : ''}\n        <form>\n          <div className='theForm'>\n            <div className='text-center'>\n              <h4>Item Info</h4>\n            </div>\n            <div className=\"title\">\n              <span>Title: </span>\n              <input\n                type=\"text\"\n                name=\"title\"\n                value={this.state.title}\n                onChange={event => this.handleInputChange(event)}\n              />\n            </div>\n            <div className=\"description\">\n              <span>Description: </span>\n              <textarea\n                name=\"description\"\n                value={this.state.description}\n                onChange={event => this.handleInputChange(event)}\n              />\n            </div>\n            <div className=\"ImageLink\">\n              <span>Image Link: </span>\n              <input\n                type=\"text\"\n                name=\"imgLink\"\n                value={this.state.imgLink}\n                onChange={event => this.handleInputChange(event)}\n              />\n            </div>\n            <div className=\"genderList\">\n              <span>Gender: </span>\n              <ul className=\"selectGender d-flex justify-content-around\">\n                <li>\n                  <input type=\"radio\" id=\"male\" name=\"gender\" value=\"M\" checked={this.state.gender === 'M'} onChange={event => this.handleRadioButtonChange(event)} />\n                  <label htmlFor=\"male\">Male</label>\n                </li>\n                <li>\n                  <input type=\"radio\" id=\"female\" name=\"gender\" value=\"F\" checked={this.state.gender === 'F'} onChange={event => this.handleRadioButtonChange(event)} />\n                  <label htmlFor=\"female\">Female</label>\n                </li>\n                <li>\n                  <input type=\"radio\" id=\"unisex\" name=\"gender\" value=\"U\" checked={this.state.gender === 'U'} onChange={event => this.handleRadioButtonChange(event)} />\n                  <label htmlFor=\"unisex\">Unisex</label>\n                </li>\n              </ul>\n            </div>\n            <div className='extra-padding'>\n              <span>Category: </span>\n              <CategoryForm category={this.state.category} handleCategoryChange={this.handleCategoryChange.bind(this)} />\n            </div>\n            <div>\n              <div>Starting Price: ${this.state.startingPrice}</div>\n              <input type=\"range\" min=\"1\" max=\"300\" value={this.state.startingPrice} className=\"slider slider-width\" id=\"startingPrice\" onChange={event => this.handleSliderChange(event)} />\n            </div>\n            <div>\n              <div>Minimum Bid Increment: ${this.state.minBidIncrement}</div>\n              <input type=\"range\" min=\"1\" max=\"20\" value={this.state.minBidIncrement} className=\"slider\" id=\"minBidIncrement\" onChange={event => this.handleSliderChange(event)} />\n            </div>\n          </div>\n          <div className='AuctionSubmit'>\n            {this.state.loading ? 'Loading...' : <button className='btn btn-info submit-button' onClick={this.handleSubmit}>submit</button>}\n          </div>\n        </form>\n      </AuctionStyle>\n    )\n  }\n}\n\nfunction mapStateToProps(state) {\n  console.log('Product: mapStateToProps state', state);\n  return {\n    username: state.username,\n    userId: state.userId,\n    isLoggedIn: true\n  };\n}\n\nexport default connect(mapStateToProps)(CreateAuction);\n"]},"metadata":{},"sourceType":"module"}