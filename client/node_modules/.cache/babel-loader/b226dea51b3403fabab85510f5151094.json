{"ast":null,"code":"import _defineProperty from \"/Users/nicklascschmidt/Code/Nicky/threadauction/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/nicklascschmidt/Code/Nicky/threadauction/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/nicklascschmidt/Code/Nicky/threadauction/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/nicklascschmidt/Code/Nicky/threadauction/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/nicklascschmidt/Code/Nicky/threadauction/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/nicklascschmidt/Code/Nicky/threadauction/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/nicklascschmidt/Code/Nicky/threadauction/client/src/pages/signup/signup.js\";\nimport React from 'react';\nimport SignupForm from './SignupStyle';\nimport { validateInputs } from './userValidation';\nimport axios from 'axios';\nimport ErrorBox from '../../components/box/errorBox';\n\nvar Signup =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Signup, _React$Component);\n\n  function Signup(props) {\n    var _this;\n\n    _classCallCheck(this, Signup);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Signup).call(this, props));\n\n    _this.componentDidMount = function () {\n      _this.setState({\n        firstName: '',\n        lastName: '',\n        username: '',\n        password: '',\n        email: '',\n        address: '',\n        city: '',\n        stateUSA: '',\n        zip: '',\n        submitted: false,\n        loading: false,\n        errorArray: [],\n        isError: null\n      });\n    };\n\n    _this.handleChange = function (event) {\n      var _event$target = event.target,\n          name = _event$target.name,\n          value = _event$target.value;\n\n      _this.setState(_defineProperty({}, name, value));\n    };\n\n    _this.handleSubmit = function (event) {\n      event.preventDefault();\n\n      _this.setState({\n        loading: true\n      }, function () {\n        return _this.saveInputs();\n      });\n    };\n\n    _this.saveInputs = function () {\n      var _this$state = _this.state,\n          firstName = _this$state.firstName,\n          lastName = _this$state.lastName,\n          username = _this$state.username,\n          password = _this$state.password,\n          email = _this$state.email,\n          address = _this$state.address,\n          city = _this$state.city,\n          stateUSA = _this$state.stateUSA,\n          zip = _this$state.zip;\n      var userData = {\n        firstName: firstName.toString(),\n        lastName: lastName.toString(),\n        username: username.toString(),\n        password: password.toString(),\n        email: email.toString(),\n        address: address.toString(),\n        city: city.toString(),\n        stateUSA: stateUSA.toString(),\n        zip: zip.toString()\n      };\n      console.log('saveInputs userData', userData);\n\n      var errorObject = _this.validateUserInputs(userData);\n\n      console.log('validateUserInputs returned errorObject', errorObject); // if validateUserInputs returns an error, then show to the user. Else, run sendUserDataToDb.\n\n      if (errorObject.isError) {\n        console.log('WOAH we got an error. Do not send data to db');\n\n        _this.setState({\n          errorArray: errorObject.errorArray,\n          isError: true,\n          loading: false\n        }, function () {\n          return console.log(_this.state);\n        });\n      } else {\n        _this.sendUserDataToDb(userData);\n      }\n    };\n\n    _this.validateUserInputs = function (data) {\n      console.log('validating inputs...');\n      var errorObject = validateInputs(data);\n      return errorObject;\n    };\n\n    _this.sendUserDataToDb = function (data) {\n      console.log('sending user data to db....');\n      axios.post('/api/user/create', data).then(function (resp) {\n        console.log(resp.data);\n\n        if (resp.status === 200) {\n          console.log('success');\n\n          _this.setState({\n            submitted: true,\n            loading: false,\n            errorArray: [],\n            isError: false\n          });\n        } else {\n          console.log('front end /api/user/create error');\n        }\n      }).catch(function (err) {\n        _this.setState({\n          errorArray: ['There was a problem saving your account']\n        });\n      });\n    };\n\n    _this.componentDidUpdate = function () {\n      if (_this.state.submitted) {\n        // bring user to login page\n        window.location = '/login';\n      }\n    };\n\n    _this.displayErrors = function () {\n      return _this.state.errorArray.map(function (errorMsg, n) {\n        return React.createElement(\"p\", {\n          key: n,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 135\n          },\n          __self: this\n        }, errorMsg);\n      });\n    };\n\n    _this.state = {\n      firstName: '',\n      lastName: '',\n      username: '',\n      password: '',\n      email: '',\n      address: '',\n      city: '',\n      stateUSA: '',\n      zip: '',\n      submitted: false,\n      loading: false,\n      errorArray: [],\n      isError: null\n    };\n    return _this;\n  }\n\n  _createClass(Signup, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(SignupForm, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        className: \"fillOut\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, \"Please fill out the information below.\"), this.state.isError ? React.createElement(ErrorBox, {\n        className: \"error-box\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, this.displayErrors()) : '', React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"userInfo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"userInfoHead\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, \"User Info\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        placeholder: \"First name\",\n        name: \"firstName\",\n        value: this.state.firstName,\n        onChange: function onChange(event) {\n          return _this2.handleChange(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        placeholder: \"Last name\",\n        name: \"lastName\",\n        value: this.state.lastName,\n        onChange: function onChange(event) {\n          return _this2.handleChange(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        placeholder: \"Username\",\n        name: \"username\",\n        value: this.state.username,\n        onChange: function onChange(event) {\n          return _this2.handleChange(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"password\",\n        placeholder: \"Password\",\n        name: \"password\",\n        value: this.state.password,\n        onChange: function onChange(event) {\n          return _this2.handleChange(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        placeholder: \"Email\",\n        name: \"email\",\n        value: this.state.email,\n        onChange: function onChange(event) {\n          return _this2.handleChange(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"shippingInfo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"shippingInfoHead\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }, \"Shipping Info\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        placeholder: \"Address\",\n        name: \"address\",\n        value: this.state.address,\n        onChange: function onChange(event) {\n          return _this2.handleChange(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        placeholder: \"City\",\n        name: \"city\",\n        value: this.state.city,\n        onChange: function onChange(event) {\n          return _this2.handleChange(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        placeholder: \"State\",\n        name: \"stateUSA\",\n        value: this.state.stateUSA,\n        onChange: function onChange(event) {\n          return _this2.handleChange(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        placeholder: \"Zip\",\n        name: \"zip\",\n        value: this.state.zip,\n        onChange: function onChange(event) {\n          return _this2.handleChange(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236\n        },\n        __self: this\n      }))), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"buttonDiv\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }, this.state.loading ? 'Loading...' : React.createElement(\"button\", {\n        className: \"submitBtn\",\n        onClick: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248\n        },\n        __self: this\n      }, \"submit\"))));\n    }\n  }]);\n\n  return Signup;\n}(React.Component);\n\nexport default Signup;","map":{"version":3,"sources":["/Users/nicklascschmidt/Code/Nicky/threadauction/client/src/pages/signup/signup.js"],"names":["React","SignupForm","validateInputs","axios","ErrorBox","Signup","props","componentDidMount","setState","firstName","lastName","username","password","email","address","city","stateUSA","zip","submitted","loading","errorArray","isError","handleChange","event","target","name","value","handleSubmit","preventDefault","saveInputs","state","userData","toString","console","log","errorObject","validateUserInputs","sendUserDataToDb","data","post","then","resp","status","catch","err","componentDidUpdate","window","location","displayErrors","map","errorMsg","n","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport SignupForm from './SignupStyle';\nimport { validateInputs } from './userValidation';\nimport axios from 'axios';\nimport ErrorBox from '../../components/box/errorBox';\n\n\nclass Signup extends React.Component {\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            firstName: '',\n            lastName: '',\n            username: '',\n            password: '',\n            email: '',\n            address: '',\n            city: '',\n            stateUSA: '',\n            zip: '',\n            submitted: false,\n            loading: false,\n            errorArray: [],\n            isError: null\n        }\n    }\n\n    componentDidMount = () => {\n        this.setState({\n            firstName: '',\n            lastName: '',\n            username: '',\n            password: '',\n            email: '',\n            address: '',\n            city: '',\n            stateUSA: '',\n            zip: '',\n            submitted: false,\n            loading: false,\n            errorArray: [],\n            isError: null\n        });\n    }\n\n    handleChange = (event) => {\n        const { name, value } = event.target;\n        this.setState({\n            [name]: value\n        });\n\n    }\n\n    handleSubmit = (event) => {\n        event.preventDefault();\n\n        this.setState({loading: true}, () => this.saveInputs());\n    }\n\n    saveInputs = () => {\n        \n        const { firstName, lastName, username, password, email, address, city, stateUSA, zip } = this.state;\n        const userData = {\n            firstName: firstName.toString(),\n            lastName: lastName.toString(),\n            username: username.toString(),\n            password: password.toString(),\n            email: email.toString(),\n            address: address.toString(),\n            city: city.toString(),\n            stateUSA: stateUSA.toString(),\n            zip: zip.toString()\n        }\n        console.log('saveInputs userData',userData);\n\n        const errorObject = this.validateUserInputs(userData);\n        console.log('validateUserInputs returned errorObject',errorObject);\n\n        // if validateUserInputs returns an error, then show to the user. Else, run sendUserDataToDb.\n        if (errorObject.isError) {\n            console.log('WOAH we got an error. Do not send data to db');\n            this.setState({\n                errorArray: errorObject.errorArray,\n                isError: true,\n                loading: false\n            },() => console.log(this.state));\n        } else {\n            this.sendUserDataToDb(userData);\n        }\n    }\n\n    validateUserInputs = (data) => {\n        console.log('validating inputs...');\n\n        let errorObject = validateInputs(data);        \n        return errorObject;\n    }\n\n    sendUserDataToDb = (data) => {\n        console.log('sending user data to db....');\n\n        axios.post('/api/user/create', data)\n            .then(resp => {\n                console.log(resp.data);\n                if (resp.status === 200) {\n                    console.log('success');\n                    this.setState({\n                        submitted: true,\n                        loading: false,\n                        errorArray: [],\n                        isError: false\n                    });\n                } else {\n                    console.log('front end /api/user/create error');\n                }\n            }).catch(err => {\n                this.setState({\n                    errorArray: ['There was a problem saving your account']\n                });\n            });\n        \n    }\n\n    componentDidUpdate = () => {\n        if (this.state.submitted) {\n            // bring user to login page\n            window.location = '/login';\n        }\n    }\n\n\n    displayErrors = () => {\n        return this.state.errorArray.map((errorMsg , n) => {\n            return <p key={n}>{errorMsg}</p>\n        })\n    }\n\n    \n    render() {\n       \n        return (\n            \n            <SignupForm>\n                <h3 className=\"fillOut\">Please fill out the information below.</h3>\n                {this.state.isError ? <ErrorBox className='error-box'>{this.displayErrors()}</ErrorBox> : ''}\n\n                <form>\n                       <div className=\"userInfo\">\n                            <p className=\"userInfoHead\">User Info</p>\n                            <div>\n                                <input\n                                    type=\"text\"\n                                    placeholder=\"First name\"\n                                    name=\"firstName\"\n                                    value={this.state.firstName}\n                                    onChange={event => this.handleChange(event)}\n                                />\n                            </div>\n                            <div>\n                               \n                                <input\n                                    type=\"text\"\n                                    placeholder=\"Last name\"\n                                    name=\"lastName\"\n                                    value={this.state.lastName}\n                                    onChange={event => this.handleChange(event)}\n                                />\n                            </div>\n                            <div>\n                                \n                                <input\n                                    type=\"text\"\n                                    placeholder=\"Username\"\n                                    name=\"username\"\n                                    value={this.state.username}\n                                    onChange={event => this.handleChange(event)}\n                                />\n                            </div>\n                            <div>\n                                \n                                <input\n                                    type=\"password\"\n                                    placeholder=\"Password\"\n                                    name=\"password\"\n                                    value={this.state.password}\n                                    onChange={event => this.handleChange(event)}\n                                />\n                            </div>\n                            <div>\n                                \n                                <input\n                                    type=\"text\"\n                                    placeholder=\"Email\"\n                                    name=\"email\"\n                                    value={this.state.email}\n                                    onChange={event => this.handleChange(event)}\n                                />\n                            </div>\n                        </div>\n\n                        <div className='shippingInfo'>\n                            <p className=\"shippingInfoHead\">Shipping Info</p>\n                            <div>\n                                \n                                <input\n                                    type=\"text\"\n                                    placeholder=\"Address\"\n                                    name=\"address\"\n                                    value={this.state.address}\n                                    onChange={event => this.handleChange(event)}\n                                />\n                            </div>\n                            <div>\n                               \n                                <input\n                                    type=\"text\"\n                                    placeholder=\"City\"\n                                    name=\"city\"\n                                    value={this.state.city}\n                                    onChange={event => this.handleChange(event)}\n                                />\n                            </div>\n                            <div>\n                            \n                                <input\n                                    type=\"text\"\n                                    placeholder=\"State\"\n                                    name=\"stateUSA\"\n                                    value={this.state.stateUSA}\n                                    onChange={event => this.handleChange(event)}\n                                />\n                            </div>\n                            <div>\n                              \n                                <input\n                                    type=\"text\"\n                                    placeholder=\"Zip\"\n                                    name=\"zip\"\n                                    value={this.state.zip}\n                                    onChange={event => this.handleChange(event)}\n                                />\n                            </div>\n                        </div>\n                   \n                    <br></br>\n                    <div className='buttonDiv'>\n                        {this.state.loading ? 'Loading...' : <button className='submitBtn' onClick={this.handleSubmit}>submit</button>}\n                    </div>\n                    \n                </form>\n            </SignupForm>\n        \n        )\n    }\n}\n\nexport default Signup;"]},"metadata":{},"sourceType":"module"}