{"ast":null,"code":"import _defineProperty from \"/Users/jasondark/Desktop/threadauction/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/jasondark/Desktop/threadauction/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jasondark/Desktop/threadauction/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/jasondark/Desktop/threadauction/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jasondark/Desktop/threadauction/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/jasondark/Desktop/threadauction/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/jasondark/Desktop/threadauction/client/src/pages/createAuction/createAuction.js\";\nimport React from \"react\";\nimport axios from \"axios\";\nimport { validateUserInputs } from \"./userValidation\";\nimport { connect } from \"react-redux\";\nimport CategoryForm from \"../../components/form/CategoryForm\";\n\nvar CreateAuction =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(CreateAuction, _React$Component);\n\n  function CreateAuction(props) {\n    var _this;\n\n    _classCallCheck(this, CreateAuction);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CreateAuction).call(this, props));\n\n    _this.componentDidMount = function () {\n      _this.setState({\n        title: \"\",\n        description: \"\",\n        imgLink: \"\",\n        gender: \"\",\n        category: \"\",\n        startingPrice: 10,\n        minBidIncrement: 5,\n        submitted: false,\n        loading: false,\n        errorArray: [],\n        isError: null\n      });\n    };\n\n    _this.handleInputChange = function (event) {\n      var _event$target = event.target,\n          name = _event$target.name,\n          value = _event$target.value;\n\n      _this.setState(_defineProperty({}, name, value));\n    };\n\n    _this.handleRadioButtonChange = function (event) {\n      _this.setState({\n        gender: event.target.value\n      }, function () {\n        console.log(_this.state);\n      });\n    };\n\n    _this.handleCategoryChange = function (event) {\n      console.log(\"handleCategoryChange: \");\n      console.log(event);\n\n      _this.setState({\n        category: event.value\n      }, function () {\n        console.log(_this.state);\n      });\n    };\n\n    _this.handleSliderChange = function (event) {\n      var _event$target2 = event.target,\n          id = _event$target2.id,\n          value = _event$target2.value;\n\n      _this.setState(_defineProperty({}, id, value));\n    };\n\n    _this.handleSubmit = function (event) {\n      event.preventDefault();\n\n      _this.setState({\n        loading: true\n      }, function () {\n        return _this.saveInputs();\n      });\n    };\n\n    _this.saveInputs = function () {\n      console.log(\"~~~~~~~~~~\", _this.state);\n      var _this$state = _this.state,\n          title = _this$state.title,\n          description = _this$state.description,\n          imgLink = _this$state.imgLink,\n          gender = _this$state.gender,\n          category = _this$state.category,\n          startingPrice = _this$state.startingPrice,\n          minBidIncrement = _this$state.minBidIncrement;\n      var itemData = {\n        userId: _this.props.userId,\n        title: title.toString(),\n        description: description.toString(),\n        imgLink: imgLink.toString(),\n        gender: gender.toString(),\n        category: category.toString(),\n        startingPrice: startingPrice,\n        minBidIncrement: minBidIncrement\n      };\n      console.log(\"saveInputs itemData\", itemData);\n      var errorObject = validateUserInputs(itemData);\n      console.log(\"validateUserInputs returned errorObject\", errorObject);\n\n      _this.setState({\n        errorArray: errorObject.errorArray,\n        isError: errorObject.isError\n      }, function () {\n        console.log(_this.state);\n\n        _this.displayErrors();\n      }); // if validateUserInputs returns an error, then show to the user. Else, run sendUserDataToDb.\n\n\n      if (errorObject.isError) {\n        console.log(\"WOAH we got an error. Do not send data to db\");\n\n        _this.setState({\n          loading: false\n        });\n      } else {\n        console.log(\"send that s h i t to the DB!\");\n\n        _this.sendUserDataToDb(itemData);\n      }\n    };\n\n    _this.sendUserDataToDb = function (data) {\n      console.log(\"sending user data to db....\");\n      axios.post(\"/api/auction/create\", data).then(function (resp) {\n        console.log(resp.data);\n\n        if (resp.status === 200) {\n          console.log(\"success\");\n\n          _this.setState({\n            submitted: true,\n            loading: false,\n            errorArray: [],\n            isError: false\n          });\n        } else {\n          console.log(\"front end /api/auction/create error\");\n        }\n      }).catch(function (err) {\n        console.log(err);\n\n        _this.setState({\n          errorArray: [\"There was a problem saving your auction.\"]\n        });\n      });\n    };\n\n    _this.componentDidUpdate = function () {\n      if (_this.state.submitted) {\n        // bring user to login page\n        // window.location = '/login';\n        console.log(\"~~~~~~SUBMITTED~~~~~~\");\n\n        _this.setState({\n          title: \"\",\n          description: \"\",\n          imgLink: \"\",\n          gender: \"\",\n          category: \"\",\n          startingPrice: 10,\n          minBidIncrement: 5,\n          submitted: false\n        }, function () {\n          _this.handleCategoryChange({\n            value: _this.state.category\n          });\n        });\n      }\n    };\n\n    _this.displayErrors = function () {\n      return _this.state.errorArray.map(function (errorMsg, n) {\n        return React.createElement(\"p\", {\n          key: n,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 191\n          },\n          __self: this\n        }, errorMsg);\n      });\n    };\n\n    _this.state = {\n      title: \"\",\n      description: \"\",\n      imgLink: \"\",\n      gender: \"\",\n      category: \"\",\n      startingPrice: \"\",\n      minBidIncrement: \"\",\n      submitted: false,\n      loading: false,\n      errorArray: [],\n      isError: null\n    };\n    return _this;\n  }\n\n  _createClass(CreateAuction, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }, \"Please fill out the information below.\"), this.state.isError ? React.createElement(\"div\", {\n        className: \"error-box\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, this.displayErrors()) : \"\", React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"form-style\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }, \"Item Info\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }, \"Title: \"), React.createElement(\"input\", {\n        type: \"text\",\n        name: \"title\",\n        value: this.state.title,\n        onChange: function onChange(event) {\n          return _this2.handleInputChange(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }, \"Description: \"), React.createElement(\"textarea\", {\n        name: \"description\",\n        value: this.state.description,\n        onChange: function onChange(event) {\n          return _this2.handleInputChange(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }, \"Image Link: \"), React.createElement(\"input\", {\n        type: \"text\",\n        name: \"imgLink\",\n        value: this.state.imgLink,\n        onChange: function onChange(event) {\n          return _this2.handleInputChange(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235\n        },\n        __self: this\n      }, \"Gender: \"), React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"male\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"radio\",\n        id: \"male\",\n        name: \"gender\",\n        value: \"M\",\n        checked: this.state.gender === \"M\",\n        onChange: function onChange(event) {\n          return _this2.handleRadioButtonChange(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239\n        },\n        __self: this\n      }), \"Male\")), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"female\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"radio\",\n        id: \"female\",\n        name: \"gender\",\n        value: \"F\",\n        checked: this.state.gender === \"F\",\n        onChange: function onChange(event) {\n          return _this2.handleRadioButtonChange(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252\n        },\n        __self: this\n      }), \"Female\")), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"unisex\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"radio\",\n        id: \"unisex\",\n        name: \"gender\",\n        value: \"U\",\n        checked: this.state.gender === \"U\",\n        onChange: function onChange(event) {\n          return _this2.handleRadioButtonChange(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265\n        },\n        __self: this\n      }), \"Unisex\")))), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279\n        },\n        __self: this\n      }, \"Category: \"), React.createElement(CategoryForm, {\n        category: this.state.category,\n        handleCategoryChange: this.handleCategoryChange.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 280\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 286\n        },\n        __self: this\n      }, \"Starting Price: $\", this.state.startingPrice), React.createElement(\"input\", {\n        type: \"range\",\n        min: \"1\",\n        max: \"300\",\n        value: this.state.startingPrice,\n        className: \"slider\",\n        id: \"startingPrice\",\n        onChange: function onChange(event) {\n          return _this2.handleSliderChange(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 287\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 298\n        },\n        __self: this\n      }, \"Minimum Bid Increment: $\", this.state.minBidIncrement), React.createElement(\"input\", {\n        type: \"range\",\n        min: \"1\",\n        max: \"20\",\n        value: this.state.minBidIncrement,\n        className: \"slider\",\n        id: \"minBidIncrement\",\n        onChange: function onChange(event) {\n          return _this2.handleSliderChange(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 299\n        },\n        __self: this\n      }))), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 310\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"align-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 311\n        },\n        __self: this\n      }, this.state.loading ? \"Loading...\" : React.createElement(\"button\", {\n        className: \"btn btn-primary submit-button\",\n        onClick: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 315\n        },\n        __self: this\n      }, \"submit\"))));\n    }\n  }]);\n\n  return CreateAuction;\n}(React.Component);\n\nfunction mapStateToProps(state) {\n  console.log(\"Product: mapStateToProps state\", state);\n  return {\n    username: state.username,\n    userId: state.userId,\n    isLoggedIn: true\n  };\n}\n\nexport default connect(mapStateToProps)(CreateAuction);","map":{"version":3,"sources":["/Users/jasondark/Desktop/threadauction/client/src/pages/createAuction/createAuction.js"],"names":["React","axios","validateUserInputs","connect","CategoryForm","CreateAuction","props","componentDidMount","setState","title","description","imgLink","gender","category","startingPrice","minBidIncrement","submitted","loading","errorArray","isError","handleInputChange","event","target","name","value","handleRadioButtonChange","console","log","state","handleCategoryChange","handleSliderChange","id","handleSubmit","preventDefault","saveInputs","itemData","userId","toString","errorObject","displayErrors","sendUserDataToDb","data","post","then","resp","status","catch","err","componentDidUpdate","map","errorMsg","n","bind","Component","mapStateToProps","username","isLoggedIn"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,kBAAT,QAAmC,kBAAnC;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,YAAP,MAAyB,oCAAzB;;IAEMC,a;;;;;AACJ,yBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,uFAAMA,KAAN;;AADiB,UAmBnBC,iBAnBmB,GAmBC,YAAM;AACxB,YAAKC,QAAL,CAAc;AACZC,QAAAA,KAAK,EAAE,EADK;AAEZC,QAAAA,WAAW,EAAE,EAFD;AAGZC,QAAAA,OAAO,EAAE,EAHG;AAIZC,QAAAA,MAAM,EAAE,EAJI;AAKZC,QAAAA,QAAQ,EAAE,EALE;AAMZC,QAAAA,aAAa,EAAE,EANH;AAOZC,QAAAA,eAAe,EAAE,CAPL;AASZC,QAAAA,SAAS,EAAE,KATC;AAUZC,QAAAA,OAAO,EAAE,KAVG;AAWZC,QAAAA,UAAU,EAAE,EAXA;AAYZC,QAAAA,OAAO,EAAE;AAZG,OAAd;AAcD,KAlCkB;;AAAA,UAoCnBC,iBApCmB,GAoCC,UAAAC,KAAK,EAAI;AAAA,0BACHA,KAAK,CAACC,MADH;AAAA,UACnBC,IADmB,iBACnBA,IADmB;AAAA,UACbC,KADa,iBACbA,KADa;;AAE3B,YAAKhB,QAAL,qBACGe,IADH,EACUC,KADV;AAGD,KAzCkB;;AAAA,UA2CnBC,uBA3CmB,GA2CO,UAAAJ,KAAK,EAAI;AACjC,YAAKb,QAAL,CACE;AACEI,QAAAA,MAAM,EAAES,KAAK,CAACC,MAAN,CAAaE;AADvB,OADF,EAIE,YAAM;AACJE,QAAAA,OAAO,CAACC,GAAR,CAAY,MAAKC,KAAjB;AACD,OANH;AAQD,KApDkB;;AAAA,UAsDnBC,oBAtDmB,GAsDI,UAAAR,KAAK,EAAI;AAC9BK,MAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAYN,KAAZ;;AACA,YAAKb,QAAL,CACE;AACEK,QAAAA,QAAQ,EAAEQ,KAAK,CAACG;AADlB,OADF,EAIE,YAAM;AACJE,QAAAA,OAAO,CAACC,GAAR,CAAY,MAAKC,KAAjB;AACD,OANH;AAQD,KAjEkB;;AAAA,UAmEnBE,kBAnEmB,GAmEE,UAAAT,KAAK,EAAI;AAAA,2BACNA,KAAK,CAACC,MADA;AAAA,UACpBS,EADoB,kBACpBA,EADoB;AAAA,UAChBP,KADgB,kBAChBA,KADgB;;AAE5B,YAAKhB,QAAL,qBACGuB,EADH,EACQP,KADR;AAGD,KAxEkB;;AAAA,UA0EnBQ,YA1EmB,GA0EJ,UAAAX,KAAK,EAAI;AACtBA,MAAAA,KAAK,CAACY,cAAN;;AAEA,YAAKzB,QAAL,CAAc;AAAES,QAAAA,OAAO,EAAE;AAAX,OAAd,EAAiC;AAAA,eAAM,MAAKiB,UAAL,EAAN;AAAA,OAAjC;AACD,KA9EkB;;AAAA,UAgFnBA,UAhFmB,GAgFN,YAAM;AACjBR,MAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0B,MAAKC,KAA/B;AADiB,wBAUb,MAAKA,KAVQ;AAAA,UAGfnB,KAHe,eAGfA,KAHe;AAAA,UAIfC,WAJe,eAIfA,WAJe;AAAA,UAKfC,OALe,eAKfA,OALe;AAAA,UAMfC,MANe,eAMfA,MANe;AAAA,UAOfC,QAPe,eAOfA,QAPe;AAAA,UAQfC,aARe,eAQfA,aARe;AAAA,UASfC,eATe,eASfA,eATe;AAWjB,UAAMoB,QAAQ,GAAG;AACfC,QAAAA,MAAM,EAAE,MAAK9B,KAAL,CAAW8B,MADJ;AAEf3B,QAAAA,KAAK,EAAEA,KAAK,CAAC4B,QAAN,EAFQ;AAGf3B,QAAAA,WAAW,EAAEA,WAAW,CAAC2B,QAAZ,EAHE;AAIf1B,QAAAA,OAAO,EAAEA,OAAO,CAAC0B,QAAR,EAJM;AAKfzB,QAAAA,MAAM,EAAEA,MAAM,CAACyB,QAAP,EALO;AAMfxB,QAAAA,QAAQ,EAAEA,QAAQ,CAACwB,QAAT,EANK;AAOfvB,QAAAA,aAAa,EAAEA,aAPA;AAQfC,QAAAA,eAAe,EAAEA;AARF,OAAjB;AAUAW,MAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ,EAAmCQ,QAAnC;AAEA,UAAMG,WAAW,GAAGpC,kBAAkB,CAACiC,QAAD,CAAtC;AACAT,MAAAA,OAAO,CAACC,GAAR,CAAY,yCAAZ,EAAuDW,WAAvD;;AAEA,YAAK9B,QAAL,CACE;AACEU,QAAAA,UAAU,EAAEoB,WAAW,CAACpB,UAD1B;AAEEC,QAAAA,OAAO,EAAEmB,WAAW,CAACnB;AAFvB,OADF,EAKE,YAAM;AACJO,QAAAA,OAAO,CAACC,GAAR,CAAY,MAAKC,KAAjB;;AACA,cAAKW,aAAL;AACD,OARH,EA1BiB,CAqCjB;;;AACA,UAAID,WAAW,CAACnB,OAAhB,EAAyB;AACvBO,QAAAA,OAAO,CAACC,GAAR,CAAY,8CAAZ;;AACA,cAAKnB,QAAL,CAAc;AACZS,UAAAA,OAAO,EAAE;AADG,SAAd;AAGD,OALD,MAKO;AACLS,QAAAA,OAAO,CAACC,GAAR,CAAY,8BAAZ;;AACA,cAAKa,gBAAL,CAAsBL,QAAtB;AACD;AACF,KA/HkB;;AAAA,UAiInBK,gBAjImB,GAiIA,UAAAC,IAAI,EAAI;AACzBf,MAAAA,OAAO,CAACC,GAAR,CAAY,6BAAZ;AAEA1B,MAAAA,KAAK,CACFyC,IADH,CACQ,qBADR,EAC+BD,IAD/B,EAEGE,IAFH,CAEQ,UAAAC,IAAI,EAAI;AACZlB,QAAAA,OAAO,CAACC,GAAR,CAAYiB,IAAI,CAACH,IAAjB;;AACA,YAAIG,IAAI,CAACC,MAAL,KAAgB,GAApB,EAAyB;AACvBnB,UAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;;AACA,gBAAKnB,QAAL,CAAc;AACZQ,YAAAA,SAAS,EAAE,IADC;AAEZC,YAAAA,OAAO,EAAE,KAFG;AAGZC,YAAAA,UAAU,EAAE,EAHA;AAIZC,YAAAA,OAAO,EAAE;AAJG,WAAd;AAMD,SARD,MAQO;AACLO,UAAAA,OAAO,CAACC,GAAR,CAAY,qCAAZ;AACD;AACF,OAfH,EAgBGmB,KAhBH,CAgBS,UAAAC,GAAG,EAAI;AACZrB,QAAAA,OAAO,CAACC,GAAR,CAAYoB,GAAZ;;AACA,cAAKvC,QAAL,CAAc;AACZU,UAAAA,UAAU,EAAE,CAAC,0CAAD;AADA,SAAd;AAGD,OArBH;AAsBD,KA1JkB;;AAAA,UA4JnB8B,kBA5JmB,GA4JE,YAAM;AACzB,UAAI,MAAKpB,KAAL,CAAWZ,SAAf,EAA0B;AACxB;AACA;AACAU,QAAAA,OAAO,CAACC,GAAR,CAAY,uBAAZ;;AACA,cAAKnB,QAAL,CACE;AACEC,UAAAA,KAAK,EAAE,EADT;AAEEC,UAAAA,WAAW,EAAE,EAFf;AAGEC,UAAAA,OAAO,EAAE,EAHX;AAIEC,UAAAA,MAAM,EAAE,EAJV;AAKEC,UAAAA,QAAQ,EAAE,EALZ;AAOEC,UAAAA,aAAa,EAAE,EAPjB;AAQEC,UAAAA,eAAe,EAAE,CARnB;AASEC,UAAAA,SAAS,EAAE;AATb,SADF,EAYE,YAAM;AACJ,gBAAKa,oBAAL,CAA0B;AAAEL,YAAAA,KAAK,EAAE,MAAKI,KAAL,CAAWf;AAApB,WAA1B;AACD,SAdH;AAgBD;AACF,KAlLkB;;AAAA,UAoLnB0B,aApLmB,GAoLH,YAAM;AACpB,aAAO,MAAKX,KAAL,CAAWV,UAAX,CAAsB+B,GAAtB,CAA0B,UAACC,QAAD,EAAWC,CAAX,EAAiB;AAChD,eAAO;AAAG,UAAA,GAAG,EAAEA,CAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAYD,QAAZ,CAAP;AACD,OAFM,CAAP;AAGD,KAxLkB;;AAGjB,UAAKtB,KAAL,GAAa;AACXnB,MAAAA,KAAK,EAAE,EADI;AAEXC,MAAAA,WAAW,EAAE,EAFF;AAGXC,MAAAA,OAAO,EAAE,EAHE;AAIXC,MAAAA,MAAM,EAAE,EAJG;AAKXC,MAAAA,QAAQ,EAAE,EALC;AAMXC,MAAAA,aAAa,EAAE,EANJ;AAOXC,MAAAA,eAAe,EAAE,EAPN;AASXC,MAAAA,SAAS,EAAE,KATA;AAUXC,MAAAA,OAAO,EAAE,KAVE;AAWXC,MAAAA,UAAU,EAAE,EAXD;AAYXC,MAAAA,OAAO,EAAE;AAZE,KAAb;AAHiB;AAiBlB;;;;6BAyKQ;AAAA;;AACP,aACE;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kDADF,EAEG,KAAKS,KAAL,CAAWT,OAAX,GACC;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA4B,KAAKoB,aAAL,EAA5B,CADD,GAGC,EALJ,EAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,EAEE;AACE,QAAA,IAAI,EAAC,MADP;AAEE,QAAA,IAAI,EAAC,OAFP;AAGE,QAAA,KAAK,EAAE,KAAKX,KAAL,CAAWnB,KAHpB;AAIE,QAAA,QAAQ,EAAE,kBAAAY,KAAK;AAAA,iBAAI,MAAI,CAACD,iBAAL,CAAuBC,KAAvB,CAAJ;AAAA,SAJjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CAFF,EAWE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBADF,EAEE;AACE,QAAA,IAAI,EAAC,aADP;AAEE,QAAA,KAAK,EAAE,KAAKO,KAAL,CAAWlB,WAFpB;AAGE,QAAA,QAAQ,EAAE,kBAAAW,KAAK;AAAA,iBAAI,MAAI,CAACD,iBAAL,CAAuBC,KAAvB,CAAJ;AAAA,SAHjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CAXF,EAmBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,EAEE;AACE,QAAA,IAAI,EAAC,MADP;AAEE,QAAA,IAAI,EAAC,SAFP;AAGE,QAAA,KAAK,EAAE,KAAKO,KAAL,CAAWjB,OAHpB;AAIE,QAAA,QAAQ,EAAE,kBAAAU,KAAK;AAAA,iBAAI,MAAI,CAACD,iBAAL,CAAuBC,KAAvB,CAAJ;AAAA,SAJjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CAnBF,EA4BE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAO,QAAA,OAAO,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AACE,QAAA,IAAI,EAAC,OADP;AAEE,QAAA,EAAE,EAAC,MAFL;AAGE,QAAA,IAAI,EAAC,QAHP;AAIE,QAAA,KAAK,EAAC,GAJR;AAKE,QAAA,OAAO,EAAE,KAAKO,KAAL,CAAWhB,MAAX,KAAsB,GALjC;AAME,QAAA,QAAQ,EAAE,kBAAAS,KAAK;AAAA,iBAAI,MAAI,CAACI,uBAAL,CAA6BJ,KAA7B,CAAJ;AAAA,SANjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,SADF,CADF,EAcE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAO,QAAA,OAAO,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AACE,QAAA,IAAI,EAAC,OADP;AAEE,QAAA,EAAE,EAAC,QAFL;AAGE,QAAA,IAAI,EAAC,QAHP;AAIE,QAAA,KAAK,EAAC,GAJR;AAKE,QAAA,OAAO,EAAE,KAAKO,KAAL,CAAWhB,MAAX,KAAsB,GALjC;AAME,QAAA,QAAQ,EAAE,kBAAAS,KAAK;AAAA,iBAAI,MAAI,CAACI,uBAAL,CAA6BJ,KAA7B,CAAJ;AAAA,SANjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,WADF,CAdF,EA2BE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAO,QAAA,OAAO,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AACE,QAAA,IAAI,EAAC,OADP;AAEE,QAAA,EAAE,EAAC,QAFL;AAGE,QAAA,IAAI,EAAC,QAHP;AAIE,QAAA,KAAK,EAAC,GAJR;AAKE,QAAA,OAAO,EAAE,KAAKO,KAAL,CAAWhB,MAAX,KAAsB,GALjC;AAME,QAAA,QAAQ,EAAE,kBAAAS,KAAK;AAAA,iBAAI,MAAI,CAACI,uBAAL,CAA6BJ,KAA7B,CAAJ;AAAA,SANjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,WADF,CA3BF,CAFF,CA5BF,EAwEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,EAEE,oBAAC,YAAD;AACE,QAAA,QAAQ,EAAE,KAAKO,KAAL,CAAWf,QADvB;AAEE,QAAA,oBAAoB,EAAE,KAAKgB,oBAAL,CAA0BuB,IAA1B,CAA+B,IAA/B,CAFxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CAxEF,EA+EE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAAuB,KAAKxB,KAAL,CAAWd,aAAlC,CADF,EAEE;AACE,QAAA,IAAI,EAAC,OADP;AAEE,QAAA,GAAG,EAAC,GAFN;AAGE,QAAA,GAAG,EAAC,KAHN;AAIE,QAAA,KAAK,EAAE,KAAKc,KAAL,CAAWd,aAJpB;AAKE,QAAA,SAAS,EAAC,QALZ;AAME,QAAA,EAAE,EAAC,eANL;AAOE,QAAA,QAAQ,EAAE,kBAAAO,KAAK;AAAA,iBAAI,MAAI,CAACS,kBAAL,CAAwBT,KAAxB,CAAJ;AAAA,SAPjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CA/EF,EA2FE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qCAA8B,KAAKO,KAAL,CAAWb,eAAzC,CADF,EAEE;AACE,QAAA,IAAI,EAAC,OADP;AAEE,QAAA,GAAG,EAAC,GAFN;AAGE,QAAA,GAAG,EAAC,IAHN;AAIE,QAAA,KAAK,EAAE,KAAKa,KAAL,CAAWb,eAJpB;AAKE,QAAA,SAAS,EAAC,QALZ;AAME,QAAA,EAAE,EAAC,iBANL;AAOE,QAAA,QAAQ,EAAE,kBAAAM,KAAK;AAAA,iBAAI,MAAI,CAACS,kBAAL,CAAwBT,KAAxB,CAAJ;AAAA,SAPjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CA3FF,CADF,EAyGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAzGF,EA0GE;AAAK,QAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,KAAKO,KAAL,CAAWX,OAAX,GACC,YADD,GAGC;AACE,QAAA,SAAS,EAAC,+BADZ;AAEE,QAAA,OAAO,EAAE,KAAKe,YAFhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAJJ,CA1GF,CARF,CADF;AAkID;;;;EA9TyBhC,KAAK,CAACqD,S;;AAiUlC,SAASC,eAAT,CAAyB1B,KAAzB,EAAgC;AAC9BF,EAAAA,OAAO,CAACC,GAAR,CAAY,gCAAZ,EAA8CC,KAA9C;AACA,SAAO;AACL2B,IAAAA,QAAQ,EAAE3B,KAAK,CAAC2B,QADX;AAELnB,IAAAA,MAAM,EAAER,KAAK,CAACQ,MAFT;AAGLoB,IAAAA,UAAU,EAAE;AAHP,GAAP;AAKD;;AAED,eAAerD,OAAO,CAACmD,eAAD,CAAP,CAAyBjD,aAAzB,CAAf","sourcesContent":["import React from \"react\";\n\nimport axios from \"axios\";\nimport { validateUserInputs } from \"./userValidation\";\nimport { connect } from \"react-redux\";\nimport CategoryForm from \"../../components/form/CategoryForm\";\n\nclass CreateAuction extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      title: \"\",\n      description: \"\",\n      imgLink: \"\",\n      gender: \"\",\n      category: \"\",\n      startingPrice: \"\",\n      minBidIncrement: \"\",\n\n      submitted: false,\n      loading: false,\n      errorArray: [],\n      isError: null\n    };\n  }\n\n  componentDidMount = () => {\n    this.setState({\n      title: \"\",\n      description: \"\",\n      imgLink: \"\",\n      gender: \"\",\n      category: \"\",\n      startingPrice: 10,\n      minBidIncrement: 5,\n\n      submitted: false,\n      loading: false,\n      errorArray: [],\n      isError: null\n    });\n  };\n\n  handleInputChange = event => {\n    const { name, value } = event.target;\n    this.setState({\n      [name]: value\n    });\n  };\n\n  handleRadioButtonChange = event => {\n    this.setState(\n      {\n        gender: event.target.value\n      },\n      () => {\n        console.log(this.state);\n      }\n    );\n  };\n\n  handleCategoryChange = event => {\n    console.log(\"handleCategoryChange: \");\n    console.log(event);\n    this.setState(\n      {\n        category: event.value\n      },\n      () => {\n        console.log(this.state);\n      }\n    );\n  };\n\n  handleSliderChange = event => {\n    const { id, value } = event.target;\n    this.setState({\n      [id]: value\n    });\n  };\n\n  handleSubmit = event => {\n    event.preventDefault();\n\n    this.setState({ loading: true }, () => this.saveInputs());\n  };\n\n  saveInputs = () => {\n    console.log(\"~~~~~~~~~~\", this.state);\n    const {\n      title,\n      description,\n      imgLink,\n      gender,\n      category,\n      startingPrice,\n      minBidIncrement\n    } = this.state;\n    const itemData = {\n      userId: this.props.userId,\n      title: title.toString(),\n      description: description.toString(),\n      imgLink: imgLink.toString(),\n      gender: gender.toString(),\n      category: category.toString(),\n      startingPrice: startingPrice,\n      minBidIncrement: minBidIncrement\n    };\n    console.log(\"saveInputs itemData\", itemData);\n\n    const errorObject = validateUserInputs(itemData);\n    console.log(\"validateUserInputs returned errorObject\", errorObject);\n\n    this.setState(\n      {\n        errorArray: errorObject.errorArray,\n        isError: errorObject.isError\n      },\n      () => {\n        console.log(this.state);\n        this.displayErrors();\n      }\n    );\n\n    // if validateUserInputs returns an error, then show to the user. Else, run sendUserDataToDb.\n    if (errorObject.isError) {\n      console.log(\"WOAH we got an error. Do not send data to db\");\n      this.setState({\n        loading: false\n      });\n    } else {\n      console.log(\"send that s h i t to the DB!\");\n      this.sendUserDataToDb(itemData);\n    }\n  };\n\n  sendUserDataToDb = data => {\n    console.log(\"sending user data to db....\");\n\n    axios\n      .post(\"/api/auction/create\", data)\n      .then(resp => {\n        console.log(resp.data);\n        if (resp.status === 200) {\n          console.log(\"success\");\n          this.setState({\n            submitted: true,\n            loading: false,\n            errorArray: [],\n            isError: false\n          });\n        } else {\n          console.log(\"front end /api/auction/create error\");\n        }\n      })\n      .catch(err => {\n        console.log(err);\n        this.setState({\n          errorArray: [\"There was a problem saving your auction.\"]\n        });\n      });\n  };\n\n  componentDidUpdate = () => {\n    if (this.state.submitted) {\n      // bring user to login page\n      // window.location = '/login';\n      console.log(\"~~~~~~SUBMITTED~~~~~~\");\n      this.setState(\n        {\n          title: \"\",\n          description: \"\",\n          imgLink: \"\",\n          gender: \"\",\n          category: \"\",\n\n          startingPrice: 10,\n          minBidIncrement: 5,\n          submitted: false\n        },\n        () => {\n          this.handleCategoryChange({ value: this.state.category });\n        }\n      );\n    }\n  };\n\n  displayErrors = () => {\n    return this.state.errorArray.map((errorMsg, n) => {\n      return <p key={n}>{errorMsg}</p>;\n    });\n  };\n\n  render() {\n    return (\n      <div className=\"container\">\n        <h3>Please fill out the information below.</h3>\n        {this.state.isError ? (\n          <div className=\"error-box\">{this.displayErrors()}</div>\n        ) : (\n          \"\"\n        )}\n\n        <form>\n          <div className=\"form-style\">\n            <h4>Item Info</h4>\n            <div>\n              <span>Title: </span>\n              <input\n                type=\"text\"\n                name=\"title\"\n                value={this.state.title}\n                onChange={event => this.handleInputChange(event)}\n              />\n            </div>\n            <div>\n              <span>Description: </span>\n              <textarea\n                name=\"description\"\n                value={this.state.description}\n                onChange={event => this.handleInputChange(event)}\n              />\n            </div>\n            <div>\n              <span>Image Link: </span>\n              <input\n                type=\"text\"\n                name=\"imgLink\"\n                value={this.state.imgLink}\n                onChange={event => this.handleInputChange(event)}\n              />\n            </div>\n            <div>\n              <span>Gender: </span>\n              <ul>\n                <li>\n                  <label htmlFor=\"male\">\n                    <input\n                      type=\"radio\"\n                      id=\"male\"\n                      name=\"gender\"\n                      value=\"M\"\n                      checked={this.state.gender === \"M\"}\n                      onChange={event => this.handleRadioButtonChange(event)}\n                    />\n                    Male\n                  </label>\n                </li>\n                <li>\n                  <label htmlFor=\"female\">\n                    <input\n                      type=\"radio\"\n                      id=\"female\"\n                      name=\"gender\"\n                      value=\"F\"\n                      checked={this.state.gender === \"F\"}\n                      onChange={event => this.handleRadioButtonChange(event)}\n                    />\n                    Female\n                  </label>\n                </li>\n                <li>\n                  <label htmlFor=\"unisex\">\n                    <input\n                      type=\"radio\"\n                      id=\"unisex\"\n                      name=\"gender\"\n                      value=\"U\"\n                      checked={this.state.gender === \"U\"}\n                      onChange={event => this.handleRadioButtonChange(event)}\n                    />\n                    Unisex\n                  </label>\n                </li>\n              </ul>\n            </div>\n            <div>\n              <span>Category: </span>\n              <CategoryForm\n                category={this.state.category}\n                handleCategoryChange={this.handleCategoryChange.bind(this)}\n              />\n            </div>\n            <div>\n              <div>Starting Price: ${this.state.startingPrice}</div>\n              <input\n                type=\"range\"\n                min=\"1\"\n                max=\"300\"\n                value={this.state.startingPrice}\n                className=\"slider\"\n                id=\"startingPrice\"\n                onChange={event => this.handleSliderChange(event)}\n              />\n            </div>\n            <div>\n              <div>Minimum Bid Increment: ${this.state.minBidIncrement}</div>\n              <input\n                type=\"range\"\n                min=\"1\"\n                max=\"20\"\n                value={this.state.minBidIncrement}\n                className=\"slider\"\n                id=\"minBidIncrement\"\n                onChange={event => this.handleSliderChange(event)}\n              />\n            </div>\n          </div>\n          <br />\n          <div className=\"align-center\">\n            {this.state.loading ? (\n              \"Loading...\"\n            ) : (\n              <button\n                className=\"btn btn-primary submit-button\"\n                onClick={this.handleSubmit}\n              >\n                submit\n              </button>\n            )}\n          </div>\n        </form>\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  console.log(\"Product: mapStateToProps state\", state);\n  return {\n    username: state.username,\n    userId: state.userId,\n    isLoggedIn: true\n  };\n}\n\nexport default connect(mapStateToProps)(CreateAuction);\n"]},"metadata":{},"sourceType":"module"}