{"ast":null,"code":"import _classCallCheck from \"/Users/nicklascschmidt/Code/Nicky/threadauction/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/nicklascschmidt/Code/Nicky/threadauction/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/nicklascschmidt/Code/Nicky/threadauction/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/nicklascschmidt/Code/Nicky/threadauction/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/nicklascschmidt/Code/Nicky/threadauction/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/nicklascschmidt/Code/Nicky/threadauction/client/src/components/bidStatus/bidStatus.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport { calculateTimeRemaining, showDurationTimeRemaining } from '../timeConverter/timeConverter';\n\nvar BidStatus =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(BidStatus, _React$Component);\n\n  function BidStatus(props) {\n    var _this;\n\n    _classCallCheck(this, BidStatus);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(BidStatus).call(this, props));\n\n    _this.getIsAuctionComplete = function (createdAt) {\n      var momentTimeRemaining = calculateTimeRemaining(createdAt);\n      var durationTimeRemainingObj = showDurationTimeRemaining(momentTimeRemaining);\n      var isAuctionComplete = durationTimeRemainingObj.isComplete;\n      return isAuctionComplete;\n    };\n\n    _this.state = {\n      bidResult: null\n    };\n    return _this;\n  }\n\n  _createClass(BidStatus, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.isUserBidHighestBid(this.props.auctionId, this.props.bidAmount);\n    }\n  }, {\n    key: \"isUserBidHighestBid\",\n    value: function isUserBidHighestBid(auctionId, userBid) {\n      var _this2 = this;\n\n      var winningBid = new Promise(function (resolve, reject) {\n        _this2.getMaxBidAmountFromAuctionId(auctionId).then(function (resp) {\n          resolve(resp.data.bidAmount);\n        }).catch(function (err) {\n          reject(err);\n        });\n      });\n      winningBid.then(function (data) {\n        var bidResult = null;\n\n        if (data === userBid) {\n          bidResult = 'Auction won';\n        } else {\n          bidResult = 'Not the highest bid';\n        }\n\n        _this2.setState({\n          bidResult: bidResult\n        });\n      }).catch(function (err) {\n        console.log(err);\n      });\n    } // returns a promise\n\n  }, {\n    key: \"getMaxBidAmountFromAuctionId\",\n    value: function getMaxBidAmountFromAuctionId(auctionId) {\n      return axios.get(\"/api/auctionBids/highestBid/\".concat(auctionId));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, \"Status: \"), this.getIsAuctionComplete(this.props.createdAt) ? 'Complete' : 'Ongoing'), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }, \"Result: \"), this.state.bidResult));\n    }\n  }]);\n\n  return BidStatus;\n}(React.Component);\n\nexport default BidStatus;","map":{"version":3,"sources":["/Users/nicklascschmidt/Code/Nicky/threadauction/client/src/components/bidStatus/bidStatus.js"],"names":["React","axios","calculateTimeRemaining","showDurationTimeRemaining","BidStatus","props","getIsAuctionComplete","createdAt","momentTimeRemaining","durationTimeRemainingObj","isAuctionComplete","isComplete","state","bidResult","isUserBidHighestBid","auctionId","bidAmount","userBid","winningBid","Promise","resolve","reject","getMaxBidAmountFromAuctionId","then","resp","data","catch","err","setState","console","log","get","Component"],"mappings":";;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,sBAAT,EAAiCC,yBAAjC,QAAkE,gCAAlE;;IAEMC,S;;;;;AACJ,qBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,mFAAMA,KAAN;;AADiB,UAYnBC,oBAZmB,GAYI,UAACC,SAAD,EAAe;AACpC,UAAMC,mBAAmB,GAAGN,sBAAsB,CAACK,SAAD,CAAlD;AACA,UAAME,wBAAwB,GAAGN,yBAAyB,CAACK,mBAAD,CAA1D;AACA,UAAME,iBAAiB,GAAGD,wBAAwB,CAACE,UAAnD;AACA,aAAOD,iBAAP;AACD,KAjBkB;;AAGjB,UAAKE,KAAL,GAAa;AACXC,MAAAA,SAAS,EAAE;AADA,KAAb;AAHiB;AAMlB;;;;wCAEmB;AAClB,WAAKC,mBAAL,CAAyB,KAAKT,KAAL,CAAWU,SAApC,EAA8C,KAAKV,KAAL,CAAWW,SAAzD;AACD;;;wCASmBD,S,EAAUE,O,EAAS;AAAA;;AACrC,UAAMC,UAAU,GAAG,IAAIC,OAAJ,CAAa,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACnD,QAAA,MAAI,CAACC,4BAAL,CAAkCP,SAAlC,EACGQ,IADH,CACQ,UAAAC,IAAI,EAAI;AACZJ,UAAAA,OAAO,CAACI,IAAI,CAACC,IAAL,CAAUT,SAAX,CAAP;AACD,SAHH,EAGKU,KAHL,CAGW,UAAAC,GAAG,EAAI;AACdN,UAAAA,MAAM,CAACM,GAAD,CAAN;AACD,SALH;AAMD,OAPkB,CAAnB;AAQAT,MAAAA,UAAU,CAACK,IAAX,CAAiB,UAACE,IAAD,EAAU;AACzB,YAAIZ,SAAS,GAAG,IAAhB;;AACA,YAAIY,IAAI,KAAKR,OAAb,EAAsB;AACpBJ,UAAAA,SAAS,GAAG,aAAZ;AACD,SAFD,MAEO;AACLA,UAAAA,SAAS,GAAG,qBAAZ;AACD;;AACD,QAAA,MAAI,CAACe,QAAL,CAAc;AACZf,UAAAA,SAAS,EAAEA;AADC,SAAd;AAGD,OAVD,EAUGa,KAVH,CAUU,UAACC,GAAD,EAAS;AACjBE,QAAAA,OAAO,CAACC,GAAR,CAAYH,GAAZ;AACD,OAZD;AAaD,K,CAED;;;;iDAC6BZ,S,EAAW;AACtC,aAAOd,KAAK,CAAC8B,GAAN,uCAAyChB,SAAzC,EAAP;AACD;;;6BAEQ;AACP,aACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAH,EAA6B,KAAKT,oBAAL,CAA0B,KAAKD,KAAL,CAAWE,SAArC,IAAkD,UAAlD,GAA+D,SAA5F,CADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAH,EAA6B,KAAKK,KAAL,CAAWC,SAAxC,CAFF,CADF;AAMD;;;;EAxDqBb,KAAK,CAACgC,S;;AA2D9B,eAAe5B,SAAf","sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport { calculateTimeRemaining, showDurationTimeRemaining } from '../timeConverter/timeConverter';\n\nclass BidStatus extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      bidResult: null,\n    }\n  }\n\n  componentDidMount() {\n    this.isUserBidHighestBid(this.props.auctionId,this.props.bidAmount);\n  }\n\n  getIsAuctionComplete = (createdAt) => {\n    const momentTimeRemaining = calculateTimeRemaining(createdAt);\n    const durationTimeRemainingObj = showDurationTimeRemaining(momentTimeRemaining);\n    const isAuctionComplete = durationTimeRemainingObj.isComplete\n    return isAuctionComplete\n  }\n\n  isUserBidHighestBid(auctionId,userBid) {\n    const winningBid = new Promise( (resolve, reject) => {\n      this.getMaxBidAmountFromAuctionId(auctionId)\n        .then(resp => {\n          resolve(resp.data.bidAmount)\n        }).catch(err => {\n          reject(err)\n        });\n    })\n    winningBid.then( (data) => {\n      let bidResult = null;\n      if (data === userBid) {\n        bidResult = 'Auction won';\n      } else {\n        bidResult = 'Not the highest bid';\n      }\n      this.setState({\n        bidResult: bidResult\n      })\n    }).catch( (err) => {\n      console.log(err)\n    })\n  }\n\n  // returns a promise\n  getMaxBidAmountFromAuctionId(auctionId) {\n    return axios.get(`/api/auctionBids/highestBid/${auctionId}`)\n  }\n\n  render() {\n    return (\n      <div>\n        <p><strong>Status: </strong>{this.getIsAuctionComplete(this.props.createdAt) ? 'Complete' : 'Ongoing'}</p>\n        <p><strong>Result: </strong>{this.state.bidResult}</p>\n      </div>\n    )\n  }\n}\n\nexport default BidStatus;\n\n"]},"metadata":{},"sourceType":"module"}