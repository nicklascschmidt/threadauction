{"ast":null,"code":"import _toConsumableArray from \"/Users/nicklascschmidt/Code/Nicky/threadauction/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/nicklascschmidt/Code/Nicky/threadauction/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/nicklascschmidt/Code/Nicky/threadauction/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/nicklascschmidt/Code/Nicky/threadauction/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/nicklascschmidt/Code/Nicky/threadauction/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/nicklascschmidt/Code/Nicky/threadauction/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/nicklascschmidt/Code/Nicky/threadauction/client/src/pages/orderHistory/orderHistory.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport PrettyProfile from './orderHistoryStyles';\nimport './orderHistory-style.css';\nimport axios from 'axios';\nimport ProductListingProfile from \"../../components/productListing/productListingProfile\";\nimport { calculateCreatedAt, calculateTimeRemaining, showDurationTimeRemaining } from '../../components/timeConverter/timeConverter';\n\nvar OrderHistory =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(OrderHistory, _React$Component);\n\n  function OrderHistory(props) {\n    var _this;\n\n    _classCallCheck(this, OrderHistory);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(OrderHistory).call(this, props));\n\n    _this.componentDidMount = function () {\n      _this.setState({\n        userId: _this.props.userId,\n        username: _this.props.username,\n        bidArray: [],\n        auctionArray: [],\n        errorArray: [],\n        isError: null\n      }, function () {\n        _this.pullBidsFromDb(_this.state.userId);\n      });\n    };\n\n    _this.pullBidsFromDb = function (userId) {\n      console.log('Pulling users bids from the DB with this ID: ', userId);\n      var params = {\n        userId: userId\n      };\n      axios.get('/api/bid/auctionBids', {\n        params: params\n      }).then(function (resp) {\n        _this.setState({\n          bidArray: resp.data\n        }, function () {\n          console.log('These are all the bids the user has placed: ', _this.state.bidArray);\n\n          _this.getAuctionIds(_this.state.bidArray);\n        });\n      }).catch(function (err) {\n        console.log(err);\n      });\n    };\n\n    _this.displayBids = function (bidArray, auctionArray) {\n      console.log('displaying bids...', bidArray, auctionArray);\n      var bidArrayMapped = bidArray.map(function (bid) {\n        // console.log('bid',bid);\n        return React.createElement(\"div\", {\n          key: bid.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 76\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 77\n          },\n          __self: this\n        }, \"Bid Amount: $\", bid.bidAmount), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 78\n          },\n          __self: this\n        }, \"Bid Submitted At: \", calculateCreatedAt(bid.bidSubmitTime)), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 79\n          },\n          __self: this\n        }, \"Auction ID: \", bid.AuctionId), _this.findAuctionWithID(bid.AuctionId, _this.state.auctionArray));\n      });\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, bidArrayMapped);\n    };\n\n    _this.state = {\n      userId: '',\n      username: '',\n      bidArray: [],\n      // every bid the user has cast\n      auctionIdArray: [],\n      // auctionIds that the user has taken part in\n      auctionArray: [] // array of auctions that the user has placed bids for\n\n    };\n    return _this;\n  }\n\n  _createClass(OrderHistory, [{\n    key: \"getAuctionIds\",\n    value: function getAuctionIds(bidArray) {\n      var _this2 = this;\n\n      console.log('getting auction IDs...');\n      var auctionIdArray = [];\n      bidArray.map(function (bid) {\n        auctionIdArray.push(bid.AuctionId);\n      });\n\n      var removeDupes = function removeDupes(a) {\n        return _toConsumableArray(new Set(a));\n      };\n\n      var removeDupeArray = removeDupes(auctionIdArray);\n      this.setState({\n        auctionIdArray: removeDupeArray\n      }, function () {\n        console.log('These are the IDs of the auctions: ', _this2.state.auctionIdArray);\n\n        _this2.loopAuctionsForProductInfo(_this2.state.auctionIdArray);\n      });\n    }\n  }, {\n    key: \"findAuctionWithID\",\n    value: function findAuctionWithID(auctionID, auctionArray) {\n      console.log('looking for the auction...', auctionID, auctionArray);\n      var auctionMapped = auctionArray.map(function (auction) {\n        if (auction.id === auctionID) {\n          return React.createElement(ProductListingProfile, {\n            key: auction.id,\n            auctionId: auction.id,\n            imgLink: auction.imgLink,\n            title: auction.title,\n            startingPrice: auction.startingPrice,\n            createdAt: auction.createdAt,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 92\n            },\n            __self: this\n          });\n        }\n      });\n      return auctionMapped;\n    }\n  }, {\n    key: \"loopAuctionsForProductInfo\",\n    value: function loopAuctionsForProductInfo(auctionIdArray) {\n      var _this3 = this;\n\n      console.log('Now, we\\'re looping through the auction array and pulling data for each one. We\\'ll map it after.');\n      var bidPromises = [];\n\n      var _loop = function _loop(n) {\n        bidPromises.push(new Promise(function (resolve, reject) {\n          _this3.fetchAuctionFromDb(auctionIdArray[n]).then(function (resp) {\n            resolve(resp.data);\n          }).catch(function (err) {\n            reject(err);\n          });\n        }));\n      };\n\n      for (var n = 0; n < auctionIdArray.length; n++) {\n        _loop(n);\n      }\n\n      Promise.all(bidPromises).then(function (bidPromiseData) {\n        var filteredArray = bidPromiseData.filter(function (value) {\n          return value != '';\n        });\n\n        _this3.setState({\n          auctionArray: filteredArray\n        }, function () {\n          console.log(\"auctionArray has been set: \", _this3.state.auctionArray);\n        });\n      }).catch(function (err) {\n        console.log('an error occurred: ', err);\n      });\n    } // Returns a promise\n\n  }, {\n    key: \"fetchAuctionFromDb\",\n    value: function fetchAuctionFromDb(auctionId) {\n      var params = {\n        auctionId: auctionId\n      };\n      return axios.get('/api/auction/id', {\n        params: params\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(PrettyProfile, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, \"My Order History\"), this.state.bidArray.length > 0 ? React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, this.displayBids(this.state.bidArray, this.state.auctionArray)) : React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, \"No bids to show.\")));\n    }\n  }]);\n\n  return OrderHistory;\n}(React.Component);\n\nfunction mapStateToProps(state) {\n  console.log('OrderHistory: mapStateToProps state', state);\n  return {\n    username: state.username,\n    userId: state.userId,\n    isLoggedIn: true\n  };\n}\n\nexport default connect(mapStateToProps)(OrderHistory);","map":{"version":3,"sources":["/Users/nicklascschmidt/Code/Nicky/threadauction/client/src/pages/orderHistory/orderHistory.js"],"names":["React","connect","PrettyProfile","axios","ProductListingProfile","calculateCreatedAt","calculateTimeRemaining","showDurationTimeRemaining","OrderHistory","props","componentDidMount","setState","userId","username","bidArray","auctionArray","errorArray","isError","pullBidsFromDb","state","console","log","params","get","then","resp","data","getAuctionIds","catch","err","displayBids","bidArrayMapped","map","bid","id","bidAmount","bidSubmitTime","AuctionId","findAuctionWithID","auctionIdArray","push","removeDupes","a","Set","removeDupeArray","loopAuctionsForProductInfo","auctionID","auctionMapped","auction","imgLink","title","startingPrice","createdAt","bidPromises","n","Promise","resolve","reject","fetchAuctionFromDb","length","all","bidPromiseData","filteredArray","filter","value","auctionId","Component","mapStateToProps","isLoggedIn"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport PrettyProfile from './orderHistoryStyles';\nimport './orderHistory-style.css';\nimport axios from 'axios';\nimport ProductListingProfile from \"../../components/productListing/productListingProfile\";\nimport { calculateCreatedAt, calculateTimeRemaining, showDurationTimeRemaining } from '../../components/timeConverter/timeConverter';\n\nclass OrderHistory extends React.Component {\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            userId: '',\n            username: '',\n            bidArray: [], // every bid the user has cast\n            auctionIdArray: [], // auctionIds that the user has taken part in\n            auctionArray: [], // array of auctions that the user has placed bids for\n        }\n    }\n\n    componentDidMount = () => {\n        this.setState({\n            userId: this.props.userId,\n            username: this.props.username,\n            bidArray: [],\n            auctionArray: [],\n\n            errorArray: [],\n            isError: null\n        }, () => {\n            this.pullBidsFromDb(this.state.userId);\n        })\n    }\n\n    \n    pullBidsFromDb = (userId) => {\n        console.log('Pulling users bids from the DB with this ID: ',userId);\n        const params = { userId };\n        axios.get('/api/bid/auctionBids', { params })\n        .then(resp => {\n            this.setState({\n                bidArray: resp.data,\n            }, () => {\n                console.log('These are all the bids the user has placed: ',this.state.bidArray);\n                this.getAuctionIds(this.state.bidArray);\n            })\n        }).catch(err => {\n            console.log(err);\n        });\n    }\n\n    getAuctionIds(bidArray) {\n        console.log('getting auction IDs...');\n        let auctionIdArray = [];\n        bidArray.map( (bid) => {\n            auctionIdArray.push(bid.AuctionId);\n        })\n        let removeDupes = (a) => [...new Set(a)];\n        const removeDupeArray = removeDupes(auctionIdArray);\n\n        this.setState({\n            auctionIdArray: removeDupeArray\n        }, () => {\n          console.log('These are the IDs of the auctions: ',this.state.auctionIdArray);\n          this.loopAuctionsForProductInfo(this.state.auctionIdArray);\n        })\n    }\n\n    displayBids = (bidArray,auctionArray) => {\n        console.log('displaying bids...',bidArray,auctionArray);\n\n        const bidArrayMapped = bidArray.map( (bid) => {\n            // console.log('bid',bid);\n            return (\n                <div key={bid.id}>\n                    <p>Bid Amount: ${bid.bidAmount}</p>\n                    <p>Bid Submitted At: {calculateCreatedAt(bid.bidSubmitTime)}</p>\n                    <p>Auction ID: {bid.AuctionId}</p>\n                    {this.findAuctionWithID(bid.AuctionId,this.state.auctionArray)}\n                </div>\n            )\n        })\n        return <div>{bidArrayMapped}</div>\n    }\n\n    findAuctionWithID(auctionID,auctionArray) {\n        console.log('looking for the auction...',auctionID,auctionArray)\n        const auctionMapped = auctionArray.map( (auction) => {\n            if (auction.id === auctionID) {\n                return (\n                    <ProductListingProfile\n                        key={auction.id}\n                        auctionId={auction.id}\n                        imgLink={auction.imgLink}\n                        title={auction.title}\n                        startingPrice={auction.startingPrice}\n                        createdAt={auction.createdAt}\n                    />\n                )\n            }\n        })\n        return auctionMapped\n    }\n\n    loopAuctionsForProductInfo(auctionIdArray) {\n        console.log('Now, we\\'re looping through the auction array and pulling data for each one. We\\'ll map it after.');\n    \n        const bidPromises = [];\n        for (let n=0; n<auctionIdArray.length; n++) {\n          bidPromises.push(new Promise( (resolve, reject) => {\n            this.fetchAuctionFromDb(auctionIdArray[n])\n              .then(resp => {\n                resolve(resp.data);\n              }).catch(err => {\n                reject(err);\n              })\n          }))\n        }\n    \n        Promise.all(bidPromises).then(bidPromiseData => {\n          const filteredArray = bidPromiseData.filter( (value) => {\n            return value != '';\n          })\n          this.setState({\n            auctionArray: filteredArray\n          }, () => {\n            console.log(\"auctionArray has been set: \",this.state.auctionArray);\n          })\n        }).catch(err => {\n          console.log('an error occurred: ',err);\n        })\n    }\n\n    // Returns a promise\n    fetchAuctionFromDb(auctionId) {\n        const params = { auctionId };\n        return axios.get('/api/auction/id', { params })\n    }\n    \n    \n    render() {\n        return(\n            <PrettyProfile>\n                <div>\n                    <h2>My Order History</h2>\n                    \n                    {this.state.bidArray.length > 0 ? <div>{this.displayBids(this.state.bidArray,this.state.auctionArray)}</div> : <p>No bids to show.</p>}\n\n                </div>\n            </PrettyProfile>\n        )\n    }\n}\n\nfunction mapStateToProps(state) {\n    console.log('OrderHistory: mapStateToProps state',state);\n    return {\n      username: state.username,\n      userId: state.userId,\n      isLoggedIn: true\n    };\n}\n\nexport default connect(mapStateToProps)(OrderHistory);\n"]},"metadata":{},"sourceType":"module"}