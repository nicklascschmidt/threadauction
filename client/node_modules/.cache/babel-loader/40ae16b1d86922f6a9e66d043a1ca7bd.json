{"ast":null,"code":"import _defineProperty from \"/Users/jasondark/Desktop/threadauction/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/jasondark/Desktop/threadauction/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jasondark/Desktop/threadauction/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/jasondark/Desktop/threadauction/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jasondark/Desktop/threadauction/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/jasondark/Desktop/threadauction/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/jasondark/Desktop/threadauction/client/src/pages/signup/signup.js\";\nimport React from \"react\";\nimport SignupForm from \"./SignupStyle\";\nimport { validateInputs } from \"./userValidation\";\nimport axios from \"axios\";\n\nvar Signup =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Signup, _React$Component);\n\n  function Signup(props) {\n    var _this;\n\n    _classCallCheck(this, Signup);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Signup).call(this, props));\n\n    _this.componentDidMount = function () {\n      _this.setState({\n        firstName: \"\",\n        lastName: \"\",\n        username: \"\",\n        password: \"\",\n        email: \"\",\n        address: \"\",\n        city: \"\",\n        stateUSA: \"\",\n        zip: \"\",\n        submitted: false,\n        loading: false,\n        errorArray: [],\n        isError: null\n      });\n    };\n\n    _this.handleChange = function (event) {\n      var _event$target = event.target,\n          name = _event$target.name,\n          value = _event$target.value;\n\n      _this.setState(_defineProperty({}, name, value));\n    };\n\n    _this.handleSubmit = function (event) {\n      event.preventDefault();\n\n      _this.setState({\n        loading: true\n      }, function () {\n        return _this.saveInputs();\n      });\n    };\n\n    _this.saveInputs = function () {\n      var _this$state = _this.state,\n          firstName = _this$state.firstName,\n          lastName = _this$state.lastName,\n          username = _this$state.username,\n          password = _this$state.password,\n          email = _this$state.email,\n          address = _this$state.address,\n          city = _this$state.city,\n          stateUSA = _this$state.stateUSA,\n          zip = _this$state.zip;\n      var userData = {\n        firstName: firstName.toString(),\n        lastName: lastName.toString(),\n        username: username.toString(),\n        password: password.toString(),\n        email: email.toString(),\n        address: address.toString(),\n        city: city.toString(),\n        stateUSA: stateUSA.toString(),\n        zip: zip.toString()\n      };\n      console.log(\"saveInputs userData\", userData);\n\n      var errorObject = _this.validateUserInputs(userData);\n\n      console.log(\"validateUserInputs returned errorObject\", errorObject); // if validateUserInputs returns an error, then show to the user. Else, run sendUserDataToDb.\n\n      if (errorObject.isError) {\n        console.log(\"WOAH we got an error. Do not send data to db\");\n\n        _this.setState({\n          errorArray: errorObject.errorArray,\n          isError: true,\n          loading: false\n        }, function () {\n          return console.log(_this.state);\n        });\n      } else {\n        _this.sendUserDataToDb(userData);\n      }\n    };\n\n    _this.validateUserInputs = function (data) {\n      console.log(\"validating inputs...\");\n      var errorObject = validateInputs(data);\n      return errorObject;\n    };\n\n    _this.sendUserDataToDb = function (data) {\n      console.log(\"sending user data to db....\");\n      axios.post(\"/api/user/create\", data).then(function (resp) {\n        console.log(resp.data);\n\n        if (resp.status === 200) {\n          console.log(\"success\");\n\n          _this.setState({\n            submitted: true,\n            loading: false,\n            errorArray: [],\n            isError: false\n          });\n        } else {\n          console.log(\"front end /api/user/create error\");\n        }\n      }).catch(function (err) {\n        _this.setState({\n          errorArray: [\"There was a problem saving your account\"]\n        });\n      });\n    };\n\n    _this.componentDidUpdate = function () {\n      if (_this.state.submitted) {\n        // bring user to login page\n        window.location = \"/login\";\n      }\n    };\n\n    _this.displayErrors = function () {\n      return _this.state.errorArray.map(function (errorMsg, n) {\n        return React.createElement(\"p\", {\n          key: n,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144\n          },\n          __self: this\n        }, errorMsg);\n      });\n    };\n\n    _this.state = {\n      firstName: \"\",\n      lastName: \"\",\n      username: \"\",\n      password: \"\",\n      email: \"\",\n      address: \"\",\n      city: \"\",\n      stateUSA: \"\",\n      zip: \"\",\n      submitted: false,\n      loading: false,\n      errorArray: [],\n      isError: null\n    };\n    return _this;\n  }\n\n  _createClass(Signup, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(SignupForm, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, \"Please fill out the information below.\"), this.state.isError ? React.createElement(\"div\", {\n        className: \"error-box\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, this.displayErrors()) : \"\", React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row form-style\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, \"User Info\"), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, \"First name: \"), React.createElement(\"input\", {\n        type: \"text\",\n        name: \"firstName\",\n        value: this.state.firstName,\n        onChange: function onChange(event) {\n          return _this2.handleChange(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, \"Last name: \"), React.createElement(\"input\", {\n        type: \"text\",\n        name: \"lastName\",\n        value: this.state.lastName,\n        onChange: function onChange(event) {\n          return _this2.handleChange(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }, \"Username: \"), React.createElement(\"input\", {\n        type: \"text\",\n        name: \"username\",\n        value: this.state.username,\n        onChange: function onChange(event) {\n          return _this2.handleChange(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }, \"Password: \"), React.createElement(\"input\", {\n        type: \"text\",\n        name: \"password\",\n        value: this.state.password,\n        onChange: function onChange(event) {\n          return _this2.handleChange(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }, \"Email: \"), React.createElement(\"input\", {\n        type: \"text\",\n        name: \"email\",\n        value: this.state.email,\n        onChange: function onChange(event) {\n          return _this2.handleChange(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }))), React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }, \"Shipping Info\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      }, \"Address: \"), React.createElement(\"input\", {\n        type: \"text\",\n        name: \"address\",\n        value: this.state.address,\n        onChange: function onChange(event) {\n          return _this2.handleChange(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }, \"City: \"), React.createElement(\"input\", {\n        type: \"text\",\n        name: \"city\",\n        value: this.state.city,\n        onChange: function onChange(event) {\n          return _this2.handleChange(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229\n        },\n        __self: this\n      }, \"State: \"), React.createElement(\"input\", {\n        type: \"text\",\n        name: \"stateUSA\",\n        value: this.state.stateUSA,\n        onChange: function onChange(event) {\n          return _this2.handleChange(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238\n        },\n        __self: this\n      }, \"Zip: \"), React.createElement(\"input\", {\n        type: \"text\",\n        name: \"zip\",\n        value: this.state.zip,\n        onChange: function onChange(event) {\n          return _this2.handleChange(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239\n        },\n        __self: this\n      }))), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"align-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249\n        },\n        __self: this\n      }, this.state.loading ? \"Loading...\" : React.createElement(\"button\", {\n        className: \"btn btn-primary submit-button\",\n        onClick: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254\n        },\n        __self: this\n      }, \"submit\"))));\n    }\n  }]);\n\n  return Signup;\n}(React.Component);\n\nexport default Signup;","map":{"version":3,"sources":["/Users/jasondark/Desktop/threadauction/client/src/pages/signup/signup.js"],"names":["React","SignupForm","validateInputs","axios","Signup","props","componentDidMount","setState","firstName","lastName","username","password","email","address","city","stateUSA","zip","submitted","loading","errorArray","isError","handleChange","event","target","name","value","handleSubmit","preventDefault","saveInputs","state","userData","toString","console","log","errorObject","validateUserInputs","sendUserDataToDb","data","post","then","resp","status","catch","err","componentDidUpdate","window","location","displayErrors","map","errorMsg","n","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport SignupForm from \"./SignupStyle\";\nimport { validateInputs } from \"./userValidation\";\nimport axios from \"axios\";\n\nclass Signup extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      firstName: \"\",\n      lastName: \"\",\n      username: \"\",\n      password: \"\",\n      email: \"\",\n      address: \"\",\n      city: \"\",\n      stateUSA: \"\",\n      zip: \"\",\n      submitted: false,\n      loading: false,\n      errorArray: [],\n      isError: null\n    };\n  }\n\n  componentDidMount = () => {\n    this.setState({\n      firstName: \"\",\n      lastName: \"\",\n      username: \"\",\n      password: \"\",\n      email: \"\",\n      address: \"\",\n      city: \"\",\n      stateUSA: \"\",\n      zip: \"\",\n      submitted: false,\n      loading: false,\n      errorArray: [],\n      isError: null\n    });\n  };\n\n  handleChange = event => {\n    const { name, value } = event.target;\n    this.setState({\n      [name]: value\n    });\n  };\n\n  handleSubmit = event => {\n    event.preventDefault();\n\n    this.setState({ loading: true }, () => this.saveInputs());\n  };\n\n  saveInputs = () => {\n    const {\n      firstName,\n      lastName,\n      username,\n      password,\n      email,\n      address,\n      city,\n      stateUSA,\n      zip\n    } = this.state;\n    const userData = {\n      firstName: firstName.toString(),\n      lastName: lastName.toString(),\n      username: username.toString(),\n      password: password.toString(),\n      email: email.toString(),\n      address: address.toString(),\n      city: city.toString(),\n      stateUSA: stateUSA.toString(),\n      zip: zip.toString()\n    };\n    console.log(\"saveInputs userData\", userData);\n\n    const errorObject = this.validateUserInputs(userData);\n    console.log(\"validateUserInputs returned errorObject\", errorObject);\n\n    // if validateUserInputs returns an error, then show to the user. Else, run sendUserDataToDb.\n    if (errorObject.isError) {\n      console.log(\"WOAH we got an error. Do not send data to db\");\n      this.setState(\n        {\n          errorArray: errorObject.errorArray,\n          isError: true,\n          loading: false\n        },\n        () => console.log(this.state)\n      );\n    } else {\n      this.sendUserDataToDb(userData);\n    }\n  };\n\n  validateUserInputs = data => {\n    console.log(\"validating inputs...\");\n\n    let errorObject = validateInputs(data);\n    return errorObject;\n  };\n\n  sendUserDataToDb = data => {\n    console.log(\"sending user data to db....\");\n\n    axios\n      .post(\"/api/user/create\", data)\n      .then(resp => {\n        console.log(resp.data);\n        if (resp.status === 200) {\n          console.log(\"success\");\n          this.setState({\n            submitted: true,\n            loading: false,\n            errorArray: [],\n            isError: false\n          });\n        } else {\n          console.log(\"front end /api/user/create error\");\n        }\n      })\n      .catch(err => {\n        this.setState({\n          errorArray: [\"There was a problem saving your account\"]\n        });\n      });\n  };\n\n  componentDidUpdate = () => {\n    if (this.state.submitted) {\n      // bring user to login page\n      window.location = \"/login\";\n    }\n  };\n\n  displayErrors = () => {\n    return this.state.errorArray.map((errorMsg, n) => {\n      return <p key={n}>{errorMsg}</p>;\n    });\n  };\n\n  render() {\n    return (\n      <SignupForm>\n        <h3>Please fill out the information below.</h3>\n        {this.state.isError ? (\n          <div className=\"error-box\">{this.displayErrors()}</div>\n        ) : (\n          \"\"\n        )}\n\n        <form>\n          <div className=\"row form-style\">\n            <div className=\"col-6\">\n              <div>\n                <h4>User Info</h4>\n                <span>First name: </span>\n                <input\n                  type=\"text\"\n                  name=\"firstName\"\n                  value={this.state.firstName}\n                  onChange={event => this.handleChange(event)}\n                />\n              </div>\n              <div>\n                <span>Last name: </span>\n                <input\n                  type=\"text\"\n                  name=\"lastName\"\n                  value={this.state.lastName}\n                  onChange={event => this.handleChange(event)}\n                />\n              </div>\n              <div>\n                <span>Username: </span>\n                <input\n                  type=\"text\"\n                  name=\"username\"\n                  value={this.state.username}\n                  onChange={event => this.handleChange(event)}\n                />\n              </div>\n              <div>\n                <span>Password: </span>\n                <input\n                  type=\"text\"\n                  name=\"password\"\n                  value={this.state.password}\n                  onChange={event => this.handleChange(event)}\n                />\n              </div>\n              <div>\n                <span>Email: </span>\n                <input\n                  type=\"text\"\n                  name=\"email\"\n                  value={this.state.email}\n                  onChange={event => this.handleChange(event)}\n                />\n              </div>\n            </div>\n          \n              <h4>Shipping Info</h4>\n              <div>\n                <span>Address: </span>\n                <input\n                  type=\"text\"\n                  name=\"address\"\n                  value={this.state.address}\n                  onChange={event => this.handleChange(event)}\n                />\n              </div>\n              <div>\n                <span>City: </span>\n                <input\n                  type=\"text\"\n                  name=\"city\"\n                  value={this.state.city}\n                  onChange={event => this.handleChange(event)}\n                />\n              </div>\n              <div>\n                <span>State: </span>\n                <input\n                  type=\"text\"\n                  name=\"stateUSA\"\n                  value={this.state.stateUSA}\n                  onChange={event => this.handleChange(event)}\n                />\n              </div>\n              <div>\n                <span>Zip: </span>\n                <input\n                  type=\"text\"\n                  name=\"zip\"\n                  value={this.state.zip}\n                  onChange={event => this.handleChange(event)}\n                />\n              </div>\n            </div>\n         \n          <br />\n          <div className=\"align-center\">\n            {/* <button className='btn btn-primary submit-button' onClick={this.handleSubmit}>submit</button> */}\n            {this.state.loading ? (\n              \"Loading...\"\n            ) : (\n              <button\n                className=\"btn btn-primary submit-button\"\n                onClick={this.handleSubmit}\n              >\n                submit\n              </button>\n            )}\n          </div>\n        </form>\n      </SignupForm>\n    );\n  }\n}\n\nexport default Signup;\n"]},"metadata":{},"sourceType":"module"}